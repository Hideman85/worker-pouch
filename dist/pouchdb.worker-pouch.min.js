!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).workerPouch=e()}(function(){return function r(o,i,s){function a(t,e){if(!i[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=i[t]={exports:{}},o[t][0].call(n.exports,function(e){return a(o[t][1][e]||e)},n,n.exports,r,o,i,s)}return i[t].exports}for(var u="function"==typeof require&&require,e=0;e<s.length;e++)a(s[e]);return a}({1:[function(e,t,n){"use strict";const s=e(11);var r=e(20),o=e(19);const i=e(14),a=e(12).EventEmitter,u=r["clone"],c=r["listenerCount"],f=r["once"],l=r["guardedConsole"],d=o["isDeleted"],p=o["collectLeaves"],h=o["collectConflicts"];function v(n,t,r){a.call(this);const o=this;this.db=n;const i=(t=t?u(t):{}).complete=f((e,t)=>{e?0<c(o,"error")&&o.emit("error",e):o.emit("complete",t),o.removeAllListeners(),n.removeListener("destroyed",s)});function s(){o.cancel()}r&&(o.on("complete",e=>{r(null,e)}),o.on("error",r)),n.once("destroyed",s),t.onChange=function(e,t,n){o.isCancelled||function(e,t,n,r){try{e.emit("change",t,n,r)}catch(e){l("error",'Error in .on("change", function):',e)}}(o,e,t,n)};const e=new Promise((n,r)=>{t.complete=function(e,t){e?r(e):n(t)}});o.once("cancel",()=>{n.removeListener("destroyed",s),t.complete(null,{status:"cancelled"})}),this.then=e.then.bind(e),this.catch=e.catch.bind(e),this.then(e=>{i(null,e)},i),n.taskqueue.isReady?o.validateChanges(t):n.taskqueue.addTask(e=>{e?t.complete(e):o.isCancelled?o.emit("cancel"):o.validateChanges(t)})}function y(e,t,n){let r=[{rev:e._rev}];"all_docs"===n.style&&(r=p(t.rev_tree).map(e=>({rev:e.rev})));const o={id:t.id,changes:r,doc:e};return d(t,e._rev)&&(o.deleted=!0),n.conflicts&&(o.doc._conflicts=h(t),o.doc._conflicts.length||delete o.doc._conflicts),o}i(v,a),v.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")},v.prototype.validateChanges=function(e){e.complete;this.doChanges(e)},v.prototype.doChanges=function(t){const n=this,r=t.complete;if("live"in(t=u(t))&&!("continuous"in t)&&(t.continuous=t.live),t.processChange=y,"latest"===t.since&&(t.since="now"),t.since||(t.since=0),"now"!==t.since){"descending"in t||(t.descending=!1),t.limit=0===t.limit?1:t.limit,t.complete=r;const o=this.db._changes(t);if(o&&"function"==typeof o.cancel){const i=n["cancel"];n.cancel=s(function(e){o.cancel(),i.apply(this,e)})}}else this.db.info().then(e=>{n.isCancelled?r(null,{status:"cancelled"}):(t.since=e.update_seq,n.doChanges(t))},r)},n.Changes=v},{11:11,12:12,14:14,19:19,20:20}],2:[function(e,t,n){"use strict";const d=e(8);var r=e(5);const p=e(9),h=e(6),v=(console.debug.bind(console),e(1)["Changes"]),y=r["preprocessAttachments"],m=r["encodeArgs"],g=r["adapterFun"];function o(e,r){const o=this;var t;const i=(e="string"==typeof e?(t=d.lastIndexOf(e,"/"),{url:e.substring(0,t),name:e.substring(t+1)}):d.clone(e)).worker&&"function"==typeof e.worker?e.worker():e.worker;if(!(i&&(i.postMessage||i.controller&&i.controller.postMessage))){var n="Error: you must provide a valid `worker` in `new PouchDB()`";return console.error(n),r(new Error(n))}if(!e.name){n="Error: you must provide a database name.";return console.error(n),r(new Error(n))}function s(e){var t=e["messageId"],n=e.type,e=e["content"];if("uncaughtError"!==n){const r=o._callbacks[t];r&&("error"===n?(delete o._callbacks[t],r(e)):"success"===n?(delete o._callbacks[t],r(null,e)):o._changesListeners[t](e))}else!function(t){try{o.emit("error",t)}catch(e){console.error("The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),console.error(t)}}(e)}function a(e){e.data.id===o._instanceId&&s(e.data)}function u(e){if(void 0!==i.controller){const t=new MessageChannel;t.port1.onmessage=a,i.controller.postMessage(e,[t.port2])}else i.postMessage(e)}function c(e,t,n){if(o._destroyed)return n(new Error("this db was destroyed"));if(o._closed)return n(new Error("this db was closed"));var r=p();o._callbacks[r]=n;t=m(t);u({id:o._instanceId,type:e,messageId:r,args:t})}function f(e,t,n){n=m(n);u({id:o._instanceId,type:t,messageId:e,args:n})}o.type=function(){return"indexeddb"},o._remote=!1,o._id=g("id",e=>{c("id",[],e)}),o.compact=g("compact",(e,t)=>{"function"==typeof e&&(t=e,e={}),c("compact",[e],t)}),o._info=function(e){c("info",[],e)},o.get=g("get",(e,t,n)=>{"function"==typeof t&&(n=t,t={}),c("get",[e,t],n)}),o._get=function(e,t,n){o.get(e,t,(e,t)=>e?n(e):void n(null,{doc:t}))},o.remove=g("remove",(e,t,n,r)=>{let o;"string"==typeof t?(o={_id:e,_rev:t},"function"==typeof n&&(r=n,n={})):(o=e,n="function"==typeof t?(r=t,{}):(r=n,t));n=o._rev||n.rev;c("remove",[o._id,n],r)}),o.getAttachment=g("getAttachment",(e,t,n,r)=>{"function"==typeof n&&(r=n,n={}),c("getAttachment",[e,t,n],r)}),o.removeAttachment=g("removeAttachment",(e,t,n,r)=>{c("removeAttachment",[e,t,n],r)}),o.putAttachment=g("putAttachment",(e,t,n,r,o,i)=>{if("function"==typeof o&&(i=o,o=r,r=n,n=null),void 0===o&&(o=r,r=n,n=null),"string"==typeof r){let e;try{e=atob(r)}catch(e){return i(h.error(h.BAD_ARG,"Attachments need to be base64 encoded"))}r=d.createBlob([d.binaryStringToArrayBuffer(e)],{type:o})}c("putAttachment",[e,t,n,r,o],i)}),o.put=g("put",d.getArguments(e=>{let t,n,r,o=e.shift(),i="_id"in o;const s=e.pop();if("object"!=typeof o||Array.isArray(o))return s(h.error(h.NOT_AN_OBJECT));o=d.clone(o),y(o).then(()=>{for(;;)if(t=e.shift(),n=typeof t,"string"!=n||i?"string"!=n||!i||"_rev"in o?"object"==n&&(r=d.clone(t)):o._rev=t:(o._id=t,i=!0),!e.length)break;r=r||{},c("put",[o,r],s)}).catch(s)})),o.post=g("post",(e,t,n)=>{"function"==typeof t&&(n=t,t={}),c("post",[e,t=d.clone(t)],n)}),o._bulkDocs=function(e,t,n){c("bulkDocs",[e,t],n)},o._allDocs=function(e,t){"function"==typeof e&&(t=e,e={}),c("allDocs",[e],t)},o._changes=function(n){if((n=d.clone(n)).continuous){const e=p();return o._changesListeners[e]=n.onChange,o._callbacks[e]=n.complete,f(e,"liveChanges",[n]),{cancel(){f(e,"cancelChanges",[])}}}c("changes",[n],(e,t)=>e||null==t?(n.complete(e),r(e)):(t.results.forEach(e=>{n.onChange(e)}),!1!==n.returnDocs&&!1!==n.return_docs||(t.results=[]),void n.complete(null,t)))},o.revsDiff=g("revsDiff",(e,t,n)=>{"function"==typeof t&&(n=t,t={}),c("revsDiff",[e,t],n)}),o._viewCleanup=g("viewCleanup",e=>{c("viewCleanup",[],e)}),o._close=function(e){o._closed=!0,e()},o.destroy=g("destroy",(e,n)=>{"function"==typeof e&&(n=e,e={}),c("destroy",[],(e,t)=>e?(o.emit("error",e),n(e)):(o._destroyed=!0,i.removeEventListener("message",a),o.emit("destroyed"),void n(null,t)))}),o._instanceId=o.name||e.originalName,o._callbacks={},o._changesListeners={},o.changes=function(e,t){return"function"==typeof e&&(t=e,e={}),(e=e||{}).return_docs="return_docs"in e?e.return_docs:!e.live,new v(this,e,t)},i.addEventListener("message",a);const l={name:o._instanceId,auto_compaction:!!e.auto_compaction,storage:e.storage,adapter:e.worker_adapter};e.worker_adapter&&(l.worker_adapter=e.worker_adapter),e.revs_limit&&(l.revs_limit=e.revs_limit),c("createDatabase",[l],e=>e?r(e):void r(null,o))}o.valid=function(){return!0},o.use_prefix=!1,t.exports=o},{1:1,5:5,6:6,8:8,9:9}],3:[function(t,n,e){!function(u){!function(){"use strict";const o=t(2);var e=t(4);const i=t(10),s=()=>"root-worker";function a(e,t){var n="string"==typeof(n=e.name)&&n&&s(n)||"root-worker";let r=a.__pouchdb_global_workers[n];if(!r)try{r=new Worker(URL.createObjectURL(new Blob([i],{type:"text/javascript"}))),r.addEventListener("error",e=>{"console"in u&&"warn"in console&&console.warn("worker threw an error",e.error)}),a.__pouchdb_global_workers[n]=r}catch(e){throw"console"in u&&"info"in console&&console.info("This browser is not supported by WorkerPouch. Please use isSupportedBrowser() to check.",e),new Error("browser unsupported by worker-pouch")}e=Object.assign({},e,{worker:function(){return r}});o.call(this,e,t)}a.__pouchdb_global_workers={},a.valid=function(){return!0},a.use_prefix=!1,n.exports=e=>{if(e&&!e.plugin)return e=>e.adapter("worker",a);e.adapter("worker",a)},n.exports.isSupportedBrowser=e}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{10:10,2:2,4:4}],4:[function(e,n,t){!function(t){!function(){"use strict";n.exports=function(){return Promise.resolve().then(()=>{var e="self.onmessage = "+function(){function r(){self.postMessage({hasIndexedDB:!1})}function o(){self.postMessage({hasIndexedDB:!0})}if("undefined"!=typeof indexedDB){const i=indexedDB.open("__my_test_db__",1);i.onupgradeneeded=function(){const e=i.result;e.createObjectStore("__store__",{keyPath:"id"}),e.onerror=r},i.onsuccess=function(){const t=i.result;t.onerror=r;const e=t.transaction("__store__","readwrite"),n=e.objectStore("__store__");n.put({id:4269,foo:"bar"}),n.get(4269),e.oncomplete=function(){t.close();const e=indexedDB.deleteDatabase("__my_test_db__");e.onsuccess=o,e.onerror=r},e.onerror=r},i.onerror=r}else r()}.toString();const r=new Worker(URL.createObjectURL(new Blob([e],{type:"text/javascript"})));return new Promise((t,n)=>{r.addEventListener("error",function(){r.terminate(),n()}),r.addEventListener("message",function(e){r.terminate(),(e.data.hasIndexedDB?t:n)()}),r.postMessage({})})}).then(()=>!0,e=>("console"in t&&"info"in console&&console.info("This browser is not supported by WorkerPouch",e),!1))}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(e,t,n){"use strict";const r=e(8);console.debug.bind(console);n.preprocessAttachments=function(t){return t._attachments&&Object.keys(t._attachments)?Promise.all(Object.keys(t._attachments).map(e=>{const n=t._attachments[e];if(n.data&&"string"!=typeof n.data)return new Promise(t=>{r.readAsBinaryString(n.data,e=>{n.data=btoa(e),t()})})})):Promise.resolve()},n.encodeArgs=function(e){const t=[];return e.forEach(e=>{null===e||"object"!=typeof e||Array.isArray(e)||e instanceof Blob||e instanceof Date?t.push(e):t.push(function(t){const n=["filter","map","reduce"],r=["onChange","processChange","complete"],o={};return Object.keys(t).forEach(e=>{-1===r.indexOf(e)&&(-1!==n.indexOf(e)&&"function"==typeof t[e]?o[e]={type:"func",func:t[e].toString()}:o[e]=t[e])}),o}(e))}),t},n.padInt=function(e,t){let n=e.toString();for(;n.length<t;)n="0"+n;return n},n.adapterFun=function(i,e){return r.toPromise(r.getArguments(function(r){if(this._closed)return Promise.reject(new Error("database is closed"));const o=this;return this.taskqueue.isReady?e.apply(this,r):new Promise((t,n)=>{o.taskqueue.addTask(e=>{e?n(e):t(o[i].apply(o,r))})})}))}},{8:8}],6:[function(e,t,a){"use strict";const n=e(14);function o(e){Error.call(e.reason),this.status=e.status,this.name=e.error,this.message=e.reason,this.error=!0}n(o,Error),o.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message})},a.UNAUTHORIZED=new o({status:401,error:"unauthorized",reason:"Name or password is incorrect."}),a.MISSING_BULK_DOCS=new o({status:400,error:"bad_request",reason:"Missing JSON list of 'docs'"}),a.MISSING_DOC=new o({status:404,error:"not_found",reason:"missing"}),a.REV_CONFLICT=new o({status:409,error:"conflict",reason:"Document update conflict"}),a.INVALID_ID=new o({status:400,error:"invalid_id",reason:"_id field must contain a string"}),a.MISSING_ID=new o({status:412,error:"missing_id",reason:"_id is required for puts"}),a.RESERVED_ID=new o({status:400,error:"bad_request",reason:"Only reserved document ids may start with underscore."}),a.NOT_OPEN=new o({status:412,error:"precondition_failed",reason:"Database not open"}),a.UNKNOWN_ERROR=new o({status:500,error:"unknown_error",reason:"Database encountered an unknown error"}),a.BAD_ARG=new o({status:500,error:"badarg",reason:"Some query argument is invalid"}),a.INVALID_REQUEST=new o({status:400,error:"invalid_request",reason:"Request was invalid"}),a.QUERY_PARSE_ERROR=new o({status:400,error:"query_parse_error",reason:"Some query parameter is invalid"}),a.DOC_VALIDATION=new o({status:500,error:"doc_validation",reason:"Bad special document member"}),a.BAD_REQUEST=new o({status:400,error:"bad_request",reason:"Something wrong with the request"}),a.NOT_AN_OBJECT=new o({status:400,error:"bad_request",reason:"Document must be a JSON object"}),a.DB_MISSING=new o({status:404,error:"not_found",reason:"Database not found"}),a.IDB_ERROR=new o({status:500,error:"indexed_db_went_bad",reason:"unknown"}),a.WSQ_ERROR=new o({status:500,error:"web_sql_went_bad",reason:"unknown"}),a.LDB_ERROR=new o({status:500,error:"levelDB_went_went_bad",reason:"unknown"}),a.FORBIDDEN=new o({status:403,error:"forbidden",reason:"Forbidden by design doc validate_doc_update function"}),a.INVALID_REV=new o({status:400,error:"bad_request",reason:"Invalid rev format"}),a.FILE_EXISTS=new o({status:412,error:"file_exists",reason:"The database could not be created, the file already exists."}),a.MISSING_STUB=new o({status:412,error:"missing_stub"}),a.error=function(n,e,r){function t(e){for(const t in n)"function"!=typeof n[t]&&(this[t]=n[t]);void 0!==r&&(this.name=r),void 0!==e&&(this.reason=e)}return t.prototype=o.prototype,new t(e)},a.getErrorTypeByProp=function(t,n,r){const o=a,e=Object.keys(o).filter(e=>{e=o[e];return"function"!=typeof e&&e[t]===n});var i=r&&e.filter(e=>{return o[e].message===r})[0]||e[0];return i?o[i]:null},a.generateErrorFromResponse=function(e){let t;var n;let r,o,i;const s=a;return n=!0===e.error&&"string"==typeof e.name?e.name:e.error,i=e.reason,r=s.getErrorTypeByProp("name",n,i),e.missing||"missing"===i||"deleted"===i||"not_found"===n?r=s.MISSING_DOC:"doc_validation"===n?(r=s.DOC_VALIDATION,o=i):"bad_request"===n&&r.message!==i&&(0===i.indexOf("unknown stub attachment")?(r=s.MISSING_STUB,o=i):r=s.BAD_REQUEST),r=r||(s.getErrorTypeByProp("status",e.status,i)||s.UNKNOWN_ERROR),t=s.error(r,i,n),o&&(t.message=o),e.id&&(t.id=e.id),e.status&&(t.status=e.status),e.statusText&&(t.name=e.statusText),e.missing&&(t.missing=e.missing),t}},{14:14}],7:[function(e,t,n){"use strict";function a(e){return e instanceof ArrayBuffer?function(e){if("function"==typeof e.slice)return e.slice(0);var t=new ArrayBuffer(e.byteLength);const n=new Uint8Array(t);return e=new Uint8Array(e),n.set(e),t}(e):e.slice(0,e.size,e.type)}t.exports=function e(t){let n,r;var o,i,s;if(!t||"object"!=typeof t)return t;if(Array.isArray(t)){for(n=[],r=0,o=t.length;r<o;r++)n[r]=e(t[r]);return n}if(t instanceof Date)return t.toISOString();if((i=t)instanceof ArrayBuffer||"undefined"!=typeof Blob&&i instanceof Blob)return a(t);for(r in n={},t)!Object.prototype.hasOwnProperty.call(t,r)||void 0!==(s=e(t[r]))&&(n[r]=s);return n}},{}],8:[function(t,e,a){!function(s,r){!function(){"use strict";a.lastIndexOf=function(t,n){for(let e=t.length-1;0<=e;e--)if(t.charAt(e)===n)return e;return-1},a.clone=t(7),a.once=function(t){let n=!1;return a.getArguments(function(e){if(n)throw"console"in r&&"trace"in console&&console.trace(),new Error("once called  more than once");n=!0,t.apply(this,e)})},a.getArguments=function(r){return function(){var e=arguments.length;const t=new Array(e);let n=-1;for(;++n<e;)t[n]=arguments[n];return r.call(this,t)}},a.toPromise=function(i){return a.getArguments(function(t){const o=this,n="function"==typeof t[t.length-1]&&t.pop();let r;n&&(r=function(e,t){s.nextTick(()=>{n(e,t)})});const e=new Promise((n,r)=>{try{var e=a.once((e,t)=>{e?r(e):n(t)});t.push(e),i.apply(o,t)}catch(e){r(e)}});return r&&e.then(e=>{r(null,e)},r),e.cancel=function(){return this},e})},a.inherits=t(14);var e=t(15);a.createBlob=e=>new Blob(e),a.readAsArrayBuffer=e.readAsArrayBuffer,a.readAsBinaryString=e.readAsBinaryString,a.binaryStringToArrayBuffer=e.binaryStringToArrayBuffer,a.arrayBufferToBinaryString=e.arrayBufferToBinaryString}.call(this)}.call(this,t(28),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{14:14,15:15,28:28,7:7}],9:[function(e,t,n){"use strict";const o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");function i(e){return 0|Math.random()*e}t.exports=function(e,t){t=t||o.length;let n="",r=-1;if(e){for(;++r<e;)n+=o[i(t)];return n}for(;++r<36;)switch(r){case 8:case 13:case 18:case 23:n+="-";break;case 19:n+=o[3&i(16)|8];break;default:n+=o[i(16)]}return n}},{}],10:[function(e,t,n){t.exports='!function r(o,i,a){function s(t,e){if(!i[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);throw(n=new Error("Cannot find module \'"+t+"\'")).code="MODULE_NOT_FOUND",n}n=i[t]={exports:{}},o[t][0].call(n.exports,function(e){return s(o[t][1][e]||e)},n,n.exports,r,o,i,a)}return i[t].exports}for(var u="function"==typeof require&&require,e=0;e<a.length;e++)s(a[e]);return s}({1:[function(e,t,s){"use strict";const n=e(9);function o(e){Error.call(e.reason),this.status=e.status,this.name=e.error,this.message=e.reason,this.error=!0}n(o,Error),o.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message})},s.UNAUTHORIZED=new o({status:401,error:"unauthorized",reason:"Name or password is incorrect."}),s.MISSING_BULK_DOCS=new o({status:400,error:"bad_request",reason:"Missing JSON list of \'docs\'"}),s.MISSING_DOC=new o({status:404,error:"not_found",reason:"missing"}),s.REV_CONFLICT=new o({status:409,error:"conflict",reason:"Document update conflict"}),s.INVALID_ID=new o({status:400,error:"invalid_id",reason:"_id field must contain a string"}),s.MISSING_ID=new o({status:412,error:"missing_id",reason:"_id is required for puts"}),s.RESERVED_ID=new o({status:400,error:"bad_request",reason:"Only reserved document ids may start with underscore."}),s.NOT_OPEN=new o({status:412,error:"precondition_failed",reason:"Database not open"}),s.UNKNOWN_ERROR=new o({status:500,error:"unknown_error",reason:"Database encountered an unknown error"}),s.BAD_ARG=new o({status:500,error:"badarg",reason:"Some query argument is invalid"}),s.INVALID_REQUEST=new o({status:400,error:"invalid_request",reason:"Request was invalid"}),s.QUERY_PARSE_ERROR=new o({status:400,error:"query_parse_error",reason:"Some query parameter is invalid"}),s.DOC_VALIDATION=new o({status:500,error:"doc_validation",reason:"Bad special document member"}),s.BAD_REQUEST=new o({status:400,error:"bad_request",reason:"Something wrong with the request"}),s.NOT_AN_OBJECT=new o({status:400,error:"bad_request",reason:"Document must be a JSON object"}),s.DB_MISSING=new o({status:404,error:"not_found",reason:"Database not found"}),s.IDB_ERROR=new o({status:500,error:"indexed_db_went_bad",reason:"unknown"}),s.WSQ_ERROR=new o({status:500,error:"web_sql_went_bad",reason:"unknown"}),s.LDB_ERROR=new o({status:500,error:"levelDB_went_went_bad",reason:"unknown"}),s.FORBIDDEN=new o({status:403,error:"forbidden",reason:"Forbidden by design doc validate_doc_update function"}),s.INVALID_REV=new o({status:400,error:"bad_request",reason:"Invalid rev format"}),s.FILE_EXISTS=new o({status:412,error:"file_exists",reason:"The database could not be created, the file already exists."}),s.MISSING_STUB=new o({status:412,error:"missing_stub"}),s.error=function(n,e,r){function t(e){for(const t in n)"function"!=typeof n[t]&&(this[t]=n[t]);void 0!==r&&(this.name=r),void 0!==e&&(this.reason=e)}return t.prototype=o.prototype,new t(e)},s.getErrorTypeByProp=function(t,n,r){const o=s,e=Object.keys(o).filter(e=>{e=o[e];return"function"!=typeof e&&e[t]===n});var i=r&&e.filter(e=>{return o[e].message===r})[0]||e[0];return i?o[i]:null},s.generateErrorFromResponse=function(e){let t;var n;let r,o,i;const a=s;return n=!0===e.error&&"string"==typeof e.name?e.name:e.error,i=e.reason,r=a.getErrorTypeByProp("name",n,i),e.missing||"missing"===i||"deleted"===i||"not_found"===n?r=a.MISSING_DOC:"doc_validation"===n?(r=a.DOC_VALIDATION,o=i):"bad_request"===n&&r.message!==i&&(0===i.indexOf("unknown stub attachment")?(r=a.MISSING_STUB,o=i):r=a.BAD_REQUEST),r=r||(a.getErrorTypeByProp("status",e.status,i)||a.UNKNOWN_ERROR),t=a.error(r,i,n),o&&(t.message=o),e.id&&(t.id=e.id),e.status&&(t.status=e.status),e.statusText&&(t.name=e.statusText),e.missing&&(t.missing=e.missing),t}},{9:9}],2:[function(e,t,n){"use strict";const h=e(1),o=e(5),v=(console.debug.bind(console),o["decodeArgs"]),y={},_={};t.exports=function(n,a){function s(e,t){("function"!=typeof n.postMessage?t.ports[0]:n).postMessage(e)}function u(e,t,n){s({type:"uncaughtError",id:e,content:o.createError(t)},n)}function c(e,t,n,r){s({type:"error",id:e,messageId:t,content:o.createError(n)},r)}function f(e,t,n,r){s({type:"success",id:e,messageId:t,content:n},r)}function i(t,e,n,r,o){const i=y["$"+t];if(!i)return c(t,n,{error:"db not found"},o);Promise.resolve().then(()=>i[e].apply(i,r)).then(e=>{f(t,n,e,o)}).catch(e=>{c(t,n,e,o)})}function l(n,r,e,o){const i=y["$"+n];if(!i)return c(n,r,{error:"db not found"},o);Promise.resolve().then(()=>{const t=i.changes(e[0]);_[r]=t,t.on("change",e=>{s({type:"update",id:n,messageId:r,content:e},o)}).on("complete",e=>{t.removeAllListeners(),delete _[r],f(n,r,e,o)}).on("error",e=>{t.removeAllListeners(),delete _[r],c(n,r,e,o)})})}function d(e,t,n){return Promise.resolve().then(()=>{e.on("error",e=>{u(t,e,n)})})}function p(e,t,n,r,o){switch(0,t){case"createDatabase":return function(t,n,r,o){var e="$"+t;let i=y[e];return i?d(i,t,o).then(()=>f(t,n,{ok:!0,exists:!0},o)):("string"==typeof r[0]?r[0]:r[0].name)?(i=y[e]=(()=>{let e={adapter:"indexeddb",revs_limit:1};return Object(r[0])===r[0]?e=Object.assign({},r[0],e):e.name=r[0],a(e)})(),void d(i,t,o).then(()=>{f(t,n,{ok:!0},o)}).catch(e=>{c(t,n,e,o)})):c(t,n,{error:"you must provide a database name"},o)}(e,n,r,o);case"id":case"info":case"put":case"allDocs":case"bulkDocs":case"post":case"get":case"remove":case"revsDiff":case"compact":case"viewCleanup":case"removeAttachment":case"putAttachment":case"query":return i(e,t,n,r,o),0;case"changes":return function(e,t,n,r){const o=n[0];o&&"object"==typeof o&&(o.returnDocs=!0,o.return_docs=!0),i(e,"changes",t,n,r)}(e,n,r,o),0;case"getAttachment":return function(r,o,i,a){const s=y["$"+r];if(!s)return c(r,o,{error:"db not found"},a);Promise.resolve().then(()=>{var e=i[0];const t=i[1];let n=i[2];return"object"!=typeof n&&(n={}),s.get(e,n).then(e=>{if(!e._attachments||!e._attachments[t])throw h.MISSING_DOC;return s.getAttachment.apply(s,i).then(e=>{f(r,o,e,a)})})}).catch(e=>{c(r,o,e,a)})}(e,n,r,o),0;case"liveChanges":return l(e,n,r,o),0;case"cancelChanges":return function(e){const t=_[e];t&&t.cancel()}(n),0;case"destroy":return function(t,n,e,r){var o="$"+t;const i=y[o];if(!i)return c(t,n,{error:"db not found"},r);delete y[o],Promise.resolve().then(()=>i.destroy.apply(i,e)).then(e=>{f(t,n,e,r)}).catch(e=>{c(t,n,e,r)})}(e,n,r,o),0;default:return c(e,n,{error:"unknown API method: "+t},o),0}}n.addEventListener("message",t=>{if(t.data&&t.data.id&&t.data.args&&t.data.type&&t.data.messageId){var e,n,r,o,i=t.data.id;if("close"===t.data.type)delete y["$"+i];else try{e=t.data,n=t,r=e.type,o=e.messageId,p(i,r,o,v(e.args),n)}catch(e){u(i,e,t)}}})}},{1:1,5:5}],3:[function(e,t,n){"use strict";const r=e(2);e=e(74).plugin(e(10));r(self,e)},{10:10,2:2,74:74}],4:[function(_dereq_,module,exports){"use strict";module.exports=function safeEval(str){const target={};return eval(`target.target = (${str});`),target.target}},{}],5:[function(e,t,n){"use strict";const r=e(4);n.createError=function(e){var t=e.status||500;return e.name&&e.message&&("Error"!==e.name&&"TypeError"!==e.name||(-1!==e.message.indexOf("Bad special document member")?e.name="doc_validation":e.name="bad_request"),e={error:e.name,name:e.name,reason:e.message,message:e.message,status:t}),e},n.decodeArgs=function(e){const n=["filter","map","reduce"];return e.forEach(t=>{"object"!=typeof t||null===t||Array.isArray(t)||n.forEach(e=>{e in t&&null!==t[e]?"func"===t[e].type&&t[e].func&&(t[e]=r(t[e].func)):delete t[e]})}),e}},{4:4}],6:[function(e,t,n){"use strict";t.exports=function(r){return function(){var e=arguments.length;if(e){for(var t=[],n=-1;++n<e;)t[n]=arguments[n];return r.call(this,t)}return r.call(this,[])}}},{}],7:[function(e,t,n){},{}],8:[function(e,t,n){var s=Object.create||function(e){function t(){}return t.prototype=e,new t},a=Object.keys||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return t},r=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function o(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=s(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}((t.exports=o).EventEmitter=o).prototype._events=void 0,o.prototype._maxListeners=void 0;var i,u=10;try{var c={};Object.defineProperty&&Object.defineProperty(c,"x",{value:0}),i=0===c.x}catch(e){i=!1}function f(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var o,i;if("function"!=typeof n)throw new TypeError(\'"listener" argument must be a function\');return(o=e._events)?(o.newListener&&(e.emit("newListener",t,n.listener||n),o=e._events),i=o[t]):(o=e._events=s(null),e._eventsCount=0),i?("function"==typeof i?i=o[t]=r?[n,i]:[i,n]:r?i.unshift(n):i.push(n),i.warned||(r=f(e))&&0<r&&i.length>r&&(i.warned=!0,(r=new Error("Possible EventEmitter memory leak detected. "+i.length+\' "\'+String(t)+\'" listeners added. Use emitter.setMaxListeners() to increase limit.\')).name="MaxListenersExceededWarning",r.emitter=e,r.type=t,r.count=i.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",r.name,r.message))):(i=o[t]=n,++e._eventsCount),e}function d(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function p(e,t,n){e={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},t=r.call(d,e);return t.listener=n,e.wrapFn=t}function h(e,t,n){e=e._events;if(!e)return[];t=e[t];return t?"function"==typeof t?n?[t.listener||t]:[t]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):y(t,t.length):[]}function v(e){var t=this._events;if(t){e=t[e];if("function"==typeof e)return 1;if(e)return e.length}return 0}function y(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}i?Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError(\'"defaultMaxListeners" must be a positive number\');u=e}}):o.defaultMaxListeners=u,o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError(\'"n" argument must be a positive number\');return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return f(this)},o.prototype.emit=function(e){var t,n,r,o,i="error"===e,a=this._events;if(a)i=i&&null==a.error;else if(!i)return!1;if(i){if((t=1<arguments.length?arguments[1]:t)instanceof Error)throw t;i=new Error(\'Unhandled "error" event. (\'+t+")");throw i.context=t,i}if(!(n=a[e]))return!1;var s,u="function"==typeof n;switch(s=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var r=e.length,o=y(e,r),i=0;i<r;++i)o[i].call(n)}(n,u,this);break;case 2:!function(e,t,n,r){if(t)e.call(n,r);else for(var o=e.length,i=y(e,o),a=0;a<o;++a)i[a].call(n,r)}(n,u,this,arguments[1]);break;case 3:!function(e,t,n,r,o){if(t)e.call(n,r,o);else for(var i=e.length,a=y(e,i),s=0;s<i;++s)a[s].call(n,r,o)}(n,u,this,arguments[1],arguments[2]);break;case 4:!function(e,t,n,r,o,i){if(t)e.call(n,r,o,i);else for(var a=e.length,s=y(e,a),u=0;u<a;++u)s[u].call(n,r,o,i)}(n,u,this,arguments[1],arguments[2],arguments[3]);break;default:for(r=new Array(s-1),o=1;o<s;o++)r[o-1]=arguments[o];!function(e,t,n,r){if(t)e.apply(n,r);else for(var o=e.length,i=y(e,o),a=0;a<o;++a)i[a].apply(n,r)}(n,u,this,r)}return!0},o.prototype.on=o.prototype.addListener=function(e,t){return l(this,e,t,!1)},o.prototype.prependListener=function(e,t){return l(this,e,t,!0)},o.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError(\'"listener" argument must be a function\');return this.on(e,p(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError(\'"listener" argument must be a function\');return this.prependListener(e,p(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,o,i,a;if("function"!=typeof t)throw new TypeError(\'"listener" argument must be a function\');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=s(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length-1;0<=i;i--)if(n[i]===t||n[i].listener===t){a=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(e,t){for(var n=t,r=n+1,o=e.length;r<o;n+=1,r+=1)e[n]=e[r];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),r.removeListener&&this.emit("removeListener",e,a||t)}return this},o.prototype.removeAllListeners=function(e){var t,n=this._events;if(!n)return this;if(!n.removeListener)return 0===arguments.length?(this._events=s(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=s(null):delete n[e]),this;if(0===arguments.length){for(var r,o=a(n),i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=s(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(i=t.length-1;0<=i;i--)this.removeListener(e,t[i]);return this},o.prototype.listeners=function(e){return h(this,e,!0)},o.prototype.rawListeners=function(e){return h(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):v.call(e,t)},o.prototype.listenerCount=v,o.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],9:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(e,t){var n;t&&(e.super_=t,(n=function(){}).prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e)}},{}],10:[function(e,t,n){"use strict";var A=e(52),O=e(31),I=e(18),h=e(19),k=e(96),D=e(97),S=Number.MIN_SAFE_INTEGER,R=Number.MIN_SAFE_INTEGER+1,j=Number.MIN_SAFE_INTEGER+2,r=/[^a-zA-Z0-9_$]+|(^[^a-zA-Z_$])/g,i=/(\\\\.)|[^a-zA-Z0-9_$.]+|(^[^a-zA-Z_$])/g,a="\\\\".charCodeAt(0),o=/[^a-zA-Z0-9_$]+|(^[^a-zA-Z_$])/,s=/(\\\\.)|[^a-zA-Z0-9_$.]+|(^[^a-zA-Z_$])/;function x(e,o){function t(e){for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r===a&&o||(t+="_c"+r+"_")}return t}return o?e.replace(i,t):e.replace(r,t)}function C(e){for(var t of Object.keys(e)){if(n=t,(void 0?s:o).test(n))return!0;if(null===e[t]||"boolean"==typeof e[t])return!0;if("object"==typeof e[t])return C(e[t])}var n}var B="docs",N="meta";function L(n){return function(e){var t="unknown_error";e.target&&e.target.error&&(t=e.target.error.name||e.target.error.message),n(k.createError(k.IDB_ERROR,t,e.type))}}function w(n,r,o,e){return delete o._attachments[n].stub,e?(o._attachments[n].data=r.attachments[o._attachments[n].digest].data,Promise.resolve()):new Promise(function(t){var e=r.attachments[o._attachments[n].digest].data;A.readAsBinaryString(e,function(e){o._attachments[n].data=A.btoa(e),delete o._attachments[n].length,t()})})}function c(e,t){return(e.views[t].options&&e.views[t].options.def&&e.views[t].options.def.fields||[]).map(function(e){return"string"==typeof e?e:Object.keys(e)[0]})}function f(e){return"_find_idx/"+e.join("/")}var u=Math.pow(10,13);function l(e,i){var a=e.transaction.objectStore(B);a.getAll(IDBKeyRange.bound("_design/","_design/￿")).onsuccess=function(e){var e=e.target.result,t=Array.from(a.indexNames),n=e.filter(function(e){return 0===e.deleted&&e.revs[e.rev].data.views}).map(function(e){return e.revs[e.rev].data}).reduce(function(e,n){return Object.keys(n.views).reduce(function(e,t){t=c(n,t);return t&&0<t.length&&(e[f(t)]=["deleted"].concat(t.map(function(e){return e in["_id","_rev","_deleted","_attachments"]?e.substr(1):"data."+x(e,!0)}))),e},e)},{}),r=Object.keys(n),o=["seq"];t.forEach(function(e){-1===o.indexOf(e)&&-1===r.indexOf(e)&&a.deleteIndex(e)});e=r.filter(function(e){return-1===t.indexOf(e)});try{e.forEach(function(e){a.createIndex(e,n[e])})}catch(e){i(e)}}}function d(o,e,i,a,n){var r=i.versionchanged?indexedDB.open(i.name):indexedDB.open(i.name,+u+(new Date).getTime());r.onupgradeneeded=function(e){if(0<e.oldVersion&&e.oldVersion<u)throw new Error(\'Incorrect adapter: you should specify the "idb" adapter to open this DB\');var t=e.target.result,e=(e=e.oldVersion,Math.floor(e/u));t=t,e<1&&(t.createObjectStore(B,{keyPath:"id"}).createIndex("seq","seq",{unique:!0}),t.createObjectStore(N,{keyPath:"id"})),l(r,n)},r.onblocked=function(e){console.error("onblocked, this should never happen",e)},r.onsuccess=function(e){var t=e.target.result;t.onabort=function(e){console.error("Database has a global failure",e.target.error),delete o[i.name],t.close()},t.onversionchange=function(){console.log("Database was made stale, closing handle"),o[i.name].versionchanged=!0,t.close()};var n={id:N},e=t.transaction([N],"readwrite");e.oncomplete=function(){a({idb:t,metadata:n})};var r=e.objectStore(N);r.get(N).onsuccess=function(e){var t=!1;"doc_count"in(n=e.target.result||n)||(t=!0,n.doc_count=0),"seq"in n||(t=!0,n.seq=0),"db_uuid"in n||(t=!0,n.db_uuid=h.uuid()),t&&r.put(n)}},r.onerror=function(e){n(e.target.error)}}function p(n,e,r){return n[r.name]&&!n[r.name].versionchanged||(r.versionchanged=n[r.name]&&n[r.name].versionchanged,n[r.name]=new Promise(function(e,t){d(n,0,r,e,t)})),n[r.name]}function v(r,e,o,i){if(r.error)return i(r.error);r.txn.objectStore(B).get(e).onsuccess=function(e){var t=e.target.result,n=o.rev?o.latest?D.latest(o.rev,t):o.rev:t&&t.rev;t&&(!t.deleted||o.rev)&&n in t.revs?((e=t.revs[n].data)._id=t.id,e._rev=n,i(null,{doc:e,metadata:t,ctx:r})):i(k.createError(k.MISSING_DOC,"missing"))}}function y(e,t,n,r,o,i){if(e.error)return i(e.error);var a;e.txn.objectStore(B).get(t).onsuccess=function(e){var t=e.target.result,e=t.revs[o.rev||t.rev].data._attachments[n].digest;a=t.attachments[e].data},e.txn.oncomplete=function(){!function(e,t,n){if(t.binary)return n(null,e);A.readAsBinaryString(e,function(e){n(null,A.btoa(e))})}(a,o,i)},e.txn.onabort=i}function _(e,t,s,f,u,n,r){var o,l,c,d=[],i=[],a=u.revs_limit||1e3,p=-1===u.name.indexOf("-mrview-");function h(e){return/^_local/.test(e.id)?1:a}function v(t,n){var r=0,a={};function o(e){var o,i;e.target.result&&(a[e.target.result.id]=e.target.result),++r===n.length&&(o=t,i=a,n.forEach(function(e,t){var n;if("was_delete"in s&&!i.hasOwnProperty(e.id))n=k.createError(k.MISSING_DOC,"deleted");else if(s.new_edits&&!i.hasOwnProperty(e.id)&&"missing"===e.rev_tree[0].ids[1].status)n=k.createError(k.REV_CONFLICT);else if(i.hasOwnProperty(e.id)){if(0==(n=function(e,t){if(e.rev in t.revs&&!s.new_edits)return!1;var n=/^1-/.test(e.rev);t.deleted&&!e.deleted&&s.new_edits&&n&&((r=e.revs[e.rev].data)._rev=t.rev,r._id=t.id,e=y(O.parseDoc(r,s.new_edits,u)));n=D.merge(t.rev_tree,e.rev_tree[0],h(e));e.stemmedRevs=n.stemmedRevs,e.rev_tree=n.tree;var r=t.revs;if(r[e.rev]=e.revs[e.rev],e.revs=r,e.attachments=t.attachments,s.new_edits&&(t.deleted&&e.deleted||!t.deleted&&"new_leaf"!==n.conflicts||t.deleted&&!e.deleted&&"new_branch"===n.conflicts||t.rev===e.rev))return k.createError(k.REV_CONFLICT);return e.wasDeleted=t.deleted,e}(e,i[e.id])))return}else{var r=D.merge([],e.rev_tree[0],h(e));e.rev_tree=r.tree,e.stemmedRevs=r.stemmedRevs,(n=e).isNewDoc=!0,n.wasDeleted=e.revs[e.rev].deleted?1:0}n.error?d[t]=n:(i[n.id]=n,function(e,t,n){var r=D.winningRev(t),o=t.rev,i=/^_local/.test(t.id),a=t.revs[r].data;{var s;p&&(s=function n(r){if(!C(r))return!1;var o=Array.isArray(r),i=o?[]:{};return Object.keys(r).forEach(function(e){var t=o?e:x(e);null===r[e]?i[t]=S:"boolean"==typeof r[e]?i[t]=r[e]?j:R:"object"==typeof r[e]?i[t]=n(r[e]):i[t]=r[e]}),i}(a))?(t.data=s,delete t.data._attachments):t.data=a}t.rev=r,t.deleted=t.revs[r].deleted?1:0,i||(t.seq=++f.seq,r=0,t.isNewDoc?r=t.deleted?0:1:t.wasDeleted!==t.deleted&&(r=t.deleted?-1:1),f.doc_count+=r);delete t.isNewDoc,delete t.wasDeleted,t.stemmedRevs&&t.stemmedRevs.forEach(function(e){delete t.revs[e]});delete t.stemmedRevs,"attachments"in t||(t.attachments={});if(a._attachments)for(var u in a._attachments){var c=a._attachments[u];if(c.stub){if(!(c.digest in t.attachments))return l=k.createError(k.MISSING_STUB),e.abort();t.attachments[c.digest].revs[o]=!0}else t.attachments[c.digest]=c,t.attachments[c.digest].revs={},t.attachments[c.digest].revs[o]=!0,a._attachments[u]={stub:!0,digest:c.digest,content_type:c.content_type,length:c.length,revpos:parseInt(o,10)}}i&&t.deleted?(e.objectStore(B).delete(t.id).onsuccess=function(){d[n]={ok:!0,id:t.id,rev:"0-0"}},_(n)):e.objectStore(B).put(t).onsuccess=function(){d[n]={ok:!0,id:t.id,rev:o},_(n)}}(o,n,c=t))}))}n.forEach(function(e){t.objectStore(B).get(e.id).onsuccess=o})}function y(e){var t={id:e.metadata.id,rev:e.metadata.rev,rev_tree:e.metadata.rev_tree,revs:e.metadata.revs||{}};return t.revs[t.rev]={data:e.data,deleted:e.metadata.deleted},t}function _(e){e===c&&o.objectStore(N).put(f)}function m(n){if(n.stub)return Promise.resolve(n);var r;if("string"==typeof n.data){if((r=function(e){try{return atob(e)}catch(e){return{error:k.createError(k.BAD_ARG,"Attachment is not a valid base64 string")}}}(n.data)).error)return Promise.reject(r.error);n.data=A.binaryStringToBlobOrBuffer(r,n.content_type)}else r=n.data;return new Promise(function(t){I.binaryMd5(r,function(e){n.digest="md5-"+e,n.length=r.size||r.length||0,t(n)})})}for(var g,b,w=0,E=t.docs.length;w<E;w++){try{g=O.parseDoc(t.docs[w],s.new_edits,u)}catch(e){g=e}if(g.error)return r(g);i.push(y(g))}b=i.map(function(e){var n=e.revs[e.rev].data;if(!n._attachments)return Promise.resolve(n);e=Object.keys(n._attachments).map(function(e){return n._attachments[e].name=e,m(n._attachments[e])});return Promise.all(e).then(function(e){var t={};return e.forEach(function(e){delete(t[e.name]=e).name}),n._attachments=t,n})}),Promise.all(b).then(function(){e._openTransactionSafely([B,N],"readwrite",function(e,t){return e?r(e):((o=t).onabort=function(){r(l)},o.ontimeout=L(r),o.oncomplete=function(){n.notify(u.name),r(null,d)},void v(o,i))})}).catch(function(e){r(e)})}function m(e,t,i,n){if(e.error)return n(e.error);if(0===i.limit){var r={total_rows:t.doc_count,offset:i.skip,rows:[]};return i.update_seq&&(r.update_seq=t.seq),n(null,r)}var o,a=[],s=[],u="startkey"in i&&i.startkey,c="endkey"in i&&i.endkey,f="key"in i&&i.key,l="keys"in i&&i.keys,d=i.skip||0,p="number"==typeof i.limit?i.limit:-1,h=!1!==i.inclusive_end,r="descending"in i&&i.descending?"prev":null;if(!l&&(o=function(e,t,n,r,o){try{if(e&&t)return o?IDBKeyRange.bound(t,e,!n,!1):IDBKeyRange.bound(e,t,!1,!n);if(e)return o?IDBKeyRange.upperBound(e):IDBKeyRange.lowerBound(e);if(t)return o?IDBKeyRange.lowerBound(t,!n):IDBKeyRange.upperBound(t,!n);if(r)return IDBKeyRange.only(r)}catch(e){return{error:e}}return null}(u,c,h,f,r))&&o.error)return function(e,t,n,r){if("DataError"===n.name&&0===n.code){var o={total_rows:t.doc_count,offset:e.skip,rows:[]};return e.update_seq&&(o.update_seq=t.seq),r(null,o)}r(k.createError(k.IDB_ERROR,n.name,n.message))}(i,t,o.error,n);var v,y,_,m,g,f=e.txn.objectStore(B);if(e.txn.oncomplete=function(){Promise.all(s).then(function(){var e={total_rows:t.doc_count,offset:0,rows:a};i.update_seq&&(e.update_seq=t.seq),n(null,e)})},l)return v=i.keys,y=f,_=b,m=new Array(v.length),g=0,v.forEach(function(t,n){y.get(t).onsuccess=function(e){e.target.result?m[n]=e.target.result:m[n]={key:t,error:"not_found"},++g===v.length&&m.forEach(function(e){_(e)})}}),0;function b(e){if(e.error&&l)return a.push(e),!0;var t={id:e.id,key:e.id,value:{rev:e.rev}};if(e.deleted)l&&(a.push(t),t.value.deleted=!0,t.doc=null);else if(d--<=0&&(a.push(t),i.include_docs&&function(e,t){var n,r=t.revs[t.rev].data;if(e.doc=r,e.doc._id=t.id,e.doc._rev=t.rev,!i.conflicts||(n=D.collectConflicts(t)).length&&(e.doc._conflicts=n),i.attachments&&r._attachments)for(var o in r._attachments)s.push(w(o,t,e.doc,i.binary))}(t,e),0==--p))return!1;return!0}(r?f.openCursor(o,r):f.openCursor(o)).onsuccess=function(e){var t=e.target.result&&e.target.result.value;if(t){if(/^_local/.test(t.id))return e.target.result.continue();b(t)&&e.target.result.continue()}}}function g(e,t,n,r,s){if(e.error)return s.complete(e.error);if(s.continuous){var o=r.name+":"+h.uuid();return t.addListener(r.name,o,n,s),t.notify(r.name),1}var u="limit"in s?s.limit:-1;0===u&&(u=1);var r=e.txn.objectStore(B).index("seq"),c=h.filterChange(s),f=0,l=s.since||0,d=[],p=[];r=s.descending?r.openCursor(null,"prev"):r.openCursor(IDBKeyRange.lowerBound(s.since,!0)),e.txn.oncomplete=function(){Promise.all(p).then(function(){s.complete(null,{results:d,last_seq:l})})},r.onsuccess=function(e){if(e.target.result){var t=e.target.result,n=t.value;if(n.data=n.revs[n.rev].data,n.data._id=n.id,n.data._rev=n.rev,n.deleted&&(n.data._deleted=!0),s.doc_ids&&-1===s.doc_ids.indexOf(n.id))return t.continue();var r=s.processChange(n.data,n,s);r.seq=n.seq,l=n.seq;e=c(r);if("object"==typeof e)return s.complete(e);if(e)if(f++,s.return_docs&&d.push(r),s.include_docs&&s.attachments&&n.data._attachments){var o,i=[];for(o in n.data._attachments){var a=w(o,n,r.doc,s.binary);i.push(a),p.push(a)}Promise.all(i).then(function(){s.onChange(r)})}else s.onChange(r);f!==u&&t.continue()}}}function b(e,t,n){if(e.error)return n(e.error);e.txn.objectStore(B).get(t).onsuccess=function(e){e.target.result?n(null,e.target.result.rev_tree):n(k.createError(k.MISSING_DOC))}}function E(e,t,i,n){if(e.error)return n(e.error);var o=e.txn.objectStore(B);o.get(t).onsuccess=function(e){var n=e.target.result;D.traverseRevTree(n.rev_tree,function(e,t,n,r,o){-1!==i.indexOf(t+"-"+n)&&(o.status="missing")});var r=[];i.forEach(function(e){if(e in n.revs){if(n.revs[e].data._attachments)for(var t in n.revs[e].data._attachments)r.push(n.revs[e].data._attachments[t].digest);delete n.revs[e]}}),r.forEach(function(t){i.forEach(function(e){delete n.attachments[t].revs[e]}),Object.keys(n.attachments[t].revs).length||delete n.attachments[t]}),o.put(n)},e.txn.oncomplete=function(){n()}}var $=null,M="￿",q=Number.NEGATIVE_INFINITY,P=[[[[[[[[[[[[]]]]]]]]]]]];function T(e,t,s){var r=this,u=t.split("/");return new Promise(function(a,n){r.get("_design/"+u[0]).then(function(e){var t=c(e,u[1]);if(!t)throw new Error("ddoc "+e._id+" with view "+u[1]+" does not have map.options.def.fields defined.");var o=s.skip,i=Number.isInteger(s.limit)&&s.limit;return function r(o,i,a){var s=f(i);return new Promise(function(n){o._openTransactionSafely([B],"readonly",function(e,t){return e?L(a)(e):(t.onabort=L(a),t.ontimeout=L(a),void(-1===Array.from(t.objectStore(B).indexNames).indexOf(s)?o._freshen().then(function(){return r(o,i,a)}).then(n):n(t.objectStore(B).index(s))))})})}(r,t,n).then(function(e){var t=function(t){function e(e,t){return void 0!==e[t]}function n(e,t){return[0].concat(e).map(function(e){if(null===e&&t)return S;if(!0===e)return j;if(!1===e)return R;if(!t){if(e===$)return q;if(e.hasOwnProperty(M))return P}return e})}var r,o;e(t,"inclusive_end")||(t.inclusive_end=!0),e(t,"inclusive_start")||(t.inclusive_start=!0),t.descending&&(r=t.startkey,o=t.inclusive_start,t.startkey=t.endkey,t.endkey=r,t.inclusive_start=t.inclusive_end,t.inclusive_end=o);try{return e(t,"key")?IDBKeyRange.only(n(t.key,!0)):e(t,"startkey")&&!e(t,"endkey")?IDBKeyRange.lowerBound(n(t.startkey),!t.inclusive_start):!e(t,"startkey")&&e(t,"endkey")?IDBKeyRange.upperBound(n(t.endkey),!t.inclusive_end):e(t,"startkey")&&e(t,"endkey")?IDBKeyRange.bound(n(t.startkey),n(t.endkey),!t.inclusive_start,!t.inclusive_end):IDBKeyRange.only([0])}catch(e){throw console.error("Could not generate keyRange",e,t),Error("Could not generate key range with "+JSON.stringify(t))}}(s),t=e.openCursor(t,s.descending?"prev":"next"),r=[];t.onerror=L(n),t.onsuccess=function(e){var t,n=e.target.result;return n&&0!==i?o?(n.advance(o),void(o=!1)):(i&&(i-=1),r.push({doc:(t=n.value,(e=t.revs[t.rev].data)._id=t.id,e._rev=t.rev,t.deleted&&(e._deleted=!0),e)}),void n.continue()):a({rows:r})}})}).catch(n)})}function F(){return Promise.resolve()}var U="indexeddb",V=new h.changesHandler,G={};function z(a,e){function t(t){return function(){var n=Array.prototype.slice.call(arguments);p(G,0,a).then(function(e){u=e.metadata,n.unshift(e.idb),t.apply(s,n)}).catch(function(e){var t=n.unshift();"function"==typeof t?t(e):console.error(e)})}}function n(r){return function(){var n=Array.prototype.slice.call(arguments);return new Promise(function(e,t){p(G,0,a).then(function(e){return u=e.metadata,n.unshift(e.idb),r.apply(s,n)}).then(e).catch(t)})}}function r(r,o,i){return o=o||[B],i=i||"readonly",function(){var t=Array.prototype.slice.call(arguments),n={};p(G,0,a).then(function(e){u=e.metadata,n.txn=e.idb.transaction(o,i),t.unshift(n),r.apply(s,t)}).catch(function(e){console.error("Failed to establish transaction safely"),console.error(e),n.error=e})}}var s=this,u={};s._openTransactionSafely=function(e,t,n){r(function(e,t){t(e.error,e.txn)},e,t)(n)},s._remote=!1,s.type=function(){return U},s._id=t(function(e,t){t(null,u.db_uuid)}),s._info=t(function(e,t){t(null,{doc_count:(t=u).doc_count,update_seq:t.seq})}),s._get=r(v),s._bulkDocs=t(function(e,t,n,r){_(s,t,n,u,a,V,r)}),s._allDocs=r(function(e,t,n){m(e,u,t,n)}),s._getAttachment=r(y),s._changes=r(function(e,t){g(e,V,s,a,t)}),s._getRevisionTree=r(b),s._doCompaction=r(E,[B],"readwrite"),s._customFindAbstractMapper={query:n(T),viewCleanup:n(F)},s._destroy=function(e,t){return r=a,o=G,i=t,V.removeAllListeners(r.name),void(r.name in o?o[r.name].then(function(e){e.idb.close(),n()}):n());function n(){indexedDB.deleteDatabase(r.name).onsuccess=function(){delete o[r.name],i(null,{ok:!0})}}var r,o,i},s._close=t(function(e,t){delete G[a.name],e.close(),t()}),s._freshen=function(){return new Promise(function(e){s._close(function(){t(e)()})})},setTimeout(function(){e(null,s)})}z.valid=function(){return!0},t.exports=function(e){e.adapter(U,z,!0)}},{18:18,19:19,31:31,52:52,96:96,97:97}],11:[function(e,t,n){"use strict";var r,o,i,a=[e(7),e(14),e(13),e(12),e(15),e(16)],s=-1,u=[],c=!1;function f(){r&&o&&(r=!1,o.length?u=o.concat(u):s=-1,u.length&&l())}function l(){if(!r){r=!(c=!1);for(var e=u.length,t=setTimeout(f);e;){for(o=u,u=[];o&&++s<e;)o[s].run();s=-1,e=u.length}o=null,r=!(s=-1),clearTimeout(t)}}for(var d=-1,p=a.length;++d<p;)if(a[d]&&a[d].test&&a[d].test()){i=a[d].install(l);break}function h(e,t){this.fun=e,this.array=t}h.prototype.run=function(){var e=this.fun,t=this.array;switch(t.length){case 0:return e();case 1:return e(t[0]);case 2:return e(t[0],t[1]);case 3:return e(t[0],t[1],t[2]);default:return e.apply(null,t)}},t.exports=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),c||r||(c=!0,i())}},{12:12,13:13,14:14,15:15,16:16,7:7}],12:[function(e,t,r){!function(n){!function(){"use strict";r.test=function(){return!n.setImmediate&&void 0!==n.MessageChannel},r.install=function(e){var t=new n.MessageChannel;return t.port1.onmessage=e,function(){t.port2.postMessage(0)}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],13:[function(e,t,n){!function(o){!function(){"use strict";var r=o.MutationObserver||o.WebKitMutationObserver;n.test=function(){return r},n.install=function(e){var t=0,e=new r(e),n=o.document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],14:[function(e,t,n){!function(t){!function(){"use strict";n.test=function(){return"function"==typeof t.queueMicrotask},n.install=function(e){return function(){t.queueMicrotask(e)}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],15:[function(e,t,r){!function(n){!function(){"use strict";r.test=function(){return"document"in n&&"onreadystatechange"in n.document.createElement("script")},r.install=function(t){return function(){var e=n.document.createElement("script");return e.onreadystatechange=function(){t(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},n.document.documentElement.appendChild(e),t}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],16:[function(e,t,n){"use strict";n.test=function(){return!0},n.install=function(e){return function(){setTimeout(e,0)}}},{}],17:[function(e,t,n){"use strict";function r(){this._store={}}function o(e){if(this._store=new r,e&&Array.isArray(e))for(var t=0,n=e.length;t<n;t++)this.add(e[t])}Object.defineProperty(n,"__esModule",{value:!0}),r.prototype.get=function(e){return this._store["$"+e]},r.prototype.set=function(e,t){return this._store["$"+e]=t,!0},r.prototype.has=function(e){return"$"+e in this._store},r.prototype.delete=function(e){var t="$"+e,e=t in this._store;return delete this._store[t],e},r.prototype.forEach=function(e){for(var t=Object.keys(this._store),n=0,r=t.length;n<r;n++){var o=t[n];e(this._store[o],o=o.substring(1))}},Object.defineProperty(r.prototype,"size",{get:function(){return Object.keys(this._store).length}}),o.prototype.add=function(e){return this._store.set(e,!0)},o.prototype.has=function(e){return this._store.has(e)},o.prototype.forEach=function(n){this._store.forEach(function(e,t){n(t)})},Object.defineProperty(o.prototype,"size",{get:function(){return this._store.size}}),!function(){if("undefined"!=typeof Symbol&&"undefined"!=typeof Map&&"undefined"!=typeof Set){var e=Object.getOwnPropertyDescriptor(Map,Symbol.species);return e&&"get"in e&&Map[Symbol.species]===Map}}()?(n.Set=o,n.Map=r):(n.Set=Set,n.Map=Map)},{}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var d=e(52),p=(e=e(20))&&"object"==typeof e&&"default"in e?e.default:e,h=self.setImmediate||self.setTimeout;function v(t,e,n,r,o){var i;(0<n||r<e.size)&&(i=n,n=r,e=(r=e).webkitSlice?r.webkitSlice(i,n):r.slice(i,n)),d.readAsArrayBuffer(e,function(e){t.append(e),o()})}function y(e,t,n,r,o){(0<n||r<t.length)&&(t=t.substring(n,r)),e.appendBinary(t),o()}n.binaryMd5=function(n,t){var e="string"==typeof n,r=e?n.length:n.size,o=Math.min(32768,r),i=Math.ceil(r/o),a=0,s=new(e?p:p.ArrayBuffer),u=e?y:v;function c(){h(l)}function f(){var e=s.end(!0),e=d.btoa(e);t(e),s.destroy()}function l(){var e=a*o,t=e+o;u(s,n,e,t,++a<i?c:f)}l()},n.stringMd5=function(e){return p.hash(e)}},{20:20,52:52}],19:[function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(n,"__esModule",{value:!0});var o=r(e(6)),i=e(17),a=r(e(9)),s=r(e(11)),u=e(96),c=r(e(8)),f=e(22),l=e(18);function d(e){if(e instanceof ArrayBuffer)return function(e){if("function"==typeof e.slice)return e.slice(0);var t=new ArrayBuffer(e.byteLength),n=new Uint8Array(t),e=new Uint8Array(e);return n.set(e),t}(e);var t=e.size,n=e.type;return"function"==typeof e.slice?e.slice(0,t,n):e.webkitSlice(0,t,n)}var p=Function.prototype.toString,h=p.call(Object);function v(e){var t,n,r,o,i;if(!e||"object"!=typeof e)return e;if(Array.isArray(e)){for(t=[],n=0,r=e.length;n<r;n++)t[n]=v(e[n]);return t}if(e instanceof Date)return e.toISOString();if(o=e,"undefined"!=typeof ArrayBuffer&&o instanceof ArrayBuffer||"undefined"!=typeof Blob&&o instanceof Blob)return d(e);if(o=e,!(null===(o=Object.getPrototypeOf(o))||"function"==typeof(o=o.constructor)&&o instanceof o&&p.call(o)==h))return e;for(n in t={},e)!Object.prototype.hasOwnProperty.call(e,n)||void 0!==(i=v(e[n]))&&(t[n]=i);return t}function y(t){var n=!1;return o(function(e){if(n)throw new Error("once called more than once");n=!0,t.apply(this,e)})}function _(a){return o(function(o){o=v(o);var i=this,t="function"==typeof o[o.length-1]&&o.pop(),e=new Promise(function(n,r){var e;try{var t=y(function(e,t){e?r(e):n(t)});o.push(t),(e=a.apply(i,o))&&"function"==typeof e.then&&n(e)}catch(e){r(e)}});return t&&e.then(function(e){t(null,e)},t),e})}function m(e,t){for(var n={},r=0,o=t.length;r<o;r++){var i=t[r];i in e&&(n[i]=e[i])}return n}var g;function b(e){return e}function w(e){return[{ok:e}]}try{localStorage.setItem("_pouch_check_localstorage",1),g=!!localStorage.getItem("_pouch_check_localstorage")}catch(e){g=!1}function E(){return g}function A(){var t;c.call(this),this._listeners={},t=this,g&&addEventListener("storage",function(e){t.emit(e.key)})}function O(e){var t;"undefined"!=typeof console&&"function"==typeof console[e]&&(t=Array.prototype.slice.call(arguments,1),console[e].apply(console,t))}a(A,c),A.prototype.addListener=function(e,t,n,r){var o,i;function a(){var e;o._listeners[t]&&(i?i="waiting":(i=!0,e=m(r,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary","return_docs"]),n.changes(e).on("change",function(e){e.seq>r.since&&!r.cancelled&&(r.since=e.seq,r.onChange(e))}).on("complete",function(){"waiting"===i&&s(a),i=!1}).on("error",function(){i=!1})))}this._listeners[t]||(i=!1,(o=this)._listeners[t]=a,this.on(e,a))},A.prototype.removeListener=function(e,t){t in this._listeners&&(c.prototype.removeListener.call(this,e,this._listeners[t]),delete this._listeners[t])},A.prototype.notifyLocalWindows=function(e){g&&(localStorage[e]="a"===localStorage[e]?"b":"a")},A.prototype.notify=function(e){this.emit(e),this.notifyLocalWindows(e)};var I="function"==typeof Object.assign?Object.assign:function(e){for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t};e=function(){}.name?function(e){return e.name}:function(e){e=e.toString().match(/^\\s*function\\s*(?:(\\S+)\\s*)?\\(/);return e&&e[1]?e[1]:""},a=e;function k(e){if(!e)return null;var t=e.split("/");return 2===t.length?t:1===t.length?[e,e]:null}var D=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],S="queryKey",R=/(?:^|&)([^&=]*)=?([^&]*)/g,j=/^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;function x(s,u,c){return new Promise(function(i,a){s.get(u,function(e,t){if(e){if(404!==e.status)return a(e);t={}}var n,r,o,e=t._rev,t=c(t);if(!t)return i({updated:!1,rev:e});t._id=u,t._rev=e,i((r=t,o=c,(n=s).put(r).then(function(e){return{updated:!0,rev:e.rev}},function(e){if(409!==e.status)throw e;return x(n,r._id,o)})))})})}e=f.v4;n.adapterFun=function(i,e){return _(o(function(r){if(this._closed)return Promise.reject(new Error("database is closed"));if(this._destroyed)return Promise.reject(new Error("database is destroyed"));var o=this;return function(r,o,e){if(r.constructor.listeners("debug").length){for(var t=["api",r.name,o],n=0;n<e.length-1;n++)t.push(e[n]);r.constructor.emit("debug",t);var i=e[e.length-1];e[e.length-1]=function(e,t){var n=(n=["api",r.name,o]).concat(e?["error",e]:["success",t]);r.constructor.emit("debug",n),i(e,t)}}}(o,i,r),this.taskqueue.isReady?e.apply(this,r):new Promise(function(t,n){o.taskqueue.addTask(function(e){e?n(e):t(o[i].apply(o,r))})})}))},n.assign=I,n.bulkGetShim=function(a,s,e){var t=s.docs,u=new i.Map;t.forEach(function(e){u.has(e.id)?u.get(e.id).push(e):u.set(e.id,[e])});var r=u.size,o=0,c=new Array(r);function f(){var n;++o===r&&(n=[],c.forEach(function(t){t.docs.forEach(function(e){n.push({id:t.id,docs:[e]})})}),e(null,{results:n}))}var n=[];u.forEach(function(e,t){n.push(t)});var l=0;function d(){var e,i;l>=n.length||(e=Math.min(l+6,n.length),e=n.slice(l,e),i=l,e.forEach(function(n,e){var r=i+e,e=u.get(n),t=m(e[0],["atts_since","attachments"]);t.open_revs=e.map(function(e){return e.rev}),t.open_revs=t.open_revs.filter(b);var o=b;0===t.open_revs.length&&(delete t.open_revs,o=w),["revs","attachments","binary","ajax","latest"].forEach(function(e){e in s&&(t[e]=s[e])}),a.get(n,t,function(e,t){var t=e?[{error:e}]:o(t);t=t,c[r]={id:n,docs:t},f(),d()})}),l+=e.length)}d()},n.changesHandler=A,n.clone=v,n.defaultBackOff=function(e){var t;return e=(t=e)?0:2e3,t=parseInt(t,10)||0,(e=parseInt(e,10))!=e||e<=t?e=(t||1)<<1:e+=1,6e5<e&&(t=3e5,e=6e5),~~((e-t)*Math.random()+t)},n.explainError=function(e,t){O("info","The above "+e+" is totally normal. "+t)},n.filterChange=function(r){var o={},i=r.filter&&"function"==typeof r.filter;return o.query=r.query_params,function(e){e.doc||(e.doc={});var t=i&&function(e,t,n){try{return!e(t,n)}catch(e){n="Filter function threw: "+e.toString();return u.createError(u.BAD_REQUEST,n)}}(r.filter,e.doc,o);if("object"==typeof t)return t;if(t)return!1;if(r.include_docs){if(!r.attachments)for(var n in e.doc._attachments)e.doc._attachments.hasOwnProperty(n)&&(e.doc._attachments[n].stub=!0)}else delete e.doc;return!0}},n.flatten=function(e){for(var t=[],n=0,r=e.length;n<r;n++)t=t.concat(e[n]);return t},n.functionName=a,n.guardedConsole=O,n.hasLocalStorage=E,n.invalidIdError=function(e){var t;if(e?"string"!=typeof e?t=u.createError(u.INVALID_ID):/^_/.test(e)&&!/^_(design|local)/.test(e)&&(t=u.createError(u.RESERVED_ID)):t=u.createError(u.MISSING_ID),t)throw t},n.isRemote=function(e){return"boolean"==typeof e._remote?e._remote:"function"==typeof e.type&&(O("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===e.type())},n.listenerCount=function(e,t){return"listenerCount"in e?e.listenerCount(t):c.listenerCount(e,t)},n.nextTick=s,n.normalizeDdocFunctionName=function(e){return(e=k(e))?e.join("/"):null},n.once=y,n.parseDdocFunctionName=k,n.parseUri=function(e){for(var t=j.exec(e),r={},n=14;n--;){var o=D[n],i=t[n]||"",a=-1!==["user","password"].indexOf(o);r[o]=a?decodeURIComponent(i):i}return r[S]={},r[D[12]].replace(R,function(e,t,n){t&&(r[S][t]=n)}),r},n.pick=m,n.rev=function(e,t){return e=v(e),t?(delete e._rev_tree,l.stringMd5(JSON.stringify(e))):f.v4().replace(/-/g,"").toLowerCase()},n.scopeEval=function(e,t){var n,r=[],o=[];for(n in t)t.hasOwnProperty(n)&&(r.push(n),o.push(t[n]));return r.push(e),Function.apply(null,r).apply(null,o)},n.toPromise=_,n.upsert=x,n.uuid=e},{11:11,17:17,18:18,22:22,6:6,8:8,9:9,96:96}],20:[function(e,n,r){!function(e){if("object"==typeof r)n.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var t;try{t=window}catch(e){t=self}t.SparkMD5=e()}}(function(o){"use strict";var r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function u(e,t){var n=e[0],r=e[1],o=e[2],i=e[3],r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+t[0]-680876936|0)<<7|n>>>25)+r|0)&r|~n&o)+t[1]-389564586|0)<<12|i>>>20)+n|0)&n|~i&r)+t[2]+606105819|0)<<17|o>>>15)+i|0)&i|~o&n)+t[3]-1044525330|0)<<22|r>>>10)+o|0;r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+t[4]-176418897|0)<<7|n>>>25)+r|0)&r|~n&o)+t[5]+1200080426|0)<<12|i>>>20)+n|0)&n|~i&r)+t[6]-1473231341|0)<<17|o>>>15)+i|0)&i|~o&n)+t[7]-45705983|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+t[8]+1770035416|0)<<7|n>>>25)+r|0)&r|~n&o)+t[9]-1958414417|0)<<12|i>>>20)+n|0)&n|~i&r)+t[10]-42063|0)<<17|o>>>15)+i|0)&i|~o&n)+t[11]-1990404162|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+t[12]+1804603682|0)<<7|n>>>25)+r|0)&r|~n&o)+t[13]-40341101|0)<<12|i>>>20)+n|0)&n|~i&r)+t[14]-1502002290|0)<<17|o>>>15)+i|0)&i|~o&n)+t[15]+1236535329|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+t[1]-165796510|0)<<5|n>>>27)+r|0)&o|r&~o)+t[6]-1069501632|0)<<9|i>>>23)+n|0)&r|n&~r)+t[11]+643717713|0)<<14|o>>>18)+i|0)&n|i&~n)+t[0]-373897302|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+t[5]-701558691|0)<<5|n>>>27)+r|0)&o|r&~o)+t[10]+38016083|0)<<9|i>>>23)+n|0)&r|n&~r)+t[15]-660478335|0)<<14|o>>>18)+i|0)&n|i&~n)+t[4]-405537848|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+t[9]+568446438|0)<<5|n>>>27)+r|0)&o|r&~o)+t[14]-1019803690|0)<<9|i>>>23)+n|0)&r|n&~r)+t[3]-187363961|0)<<14|o>>>18)+i|0)&n|i&~n)+t[8]+1163531501|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+t[13]-1444681467|0)<<5|n>>>27)+r|0)&o|r&~o)+t[2]-51403784|0)<<9|i>>>23)+n|0)&r|n&~r)+t[7]+1735328473|0)<<14|o>>>18)+i|0)&n|i&~n)+t[12]-1926607734|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+t[5]-378558|0)<<4|n>>>28)+r|0)^r^o)+t[8]-2022574463|0)<<11|i>>>21)+n|0)^n^r)+t[11]+1839030562|0)<<16|o>>>16)+i|0)^i^n)+t[14]-35309556|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+t[1]-1530992060|0)<<4|n>>>28)+r|0)^r^o)+t[4]+1272893353|0)<<11|i>>>21)+n|0)^n^r)+t[7]-155497632|0)<<16|o>>>16)+i|0)^i^n)+t[10]-1094730640|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+t[13]+681279174|0)<<4|n>>>28)+r|0)^r^o)+t[0]-358537222|0)<<11|i>>>21)+n|0)^n^r)+t[3]-722521979|0)<<16|o>>>16)+i|0)^i^n)+t[6]+76029189|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+t[9]-640364487|0)<<4|n>>>28)+r|0)^r^o)+t[12]-421815835|0)<<11|i>>>21)+n|0)^n^r)+t[15]+530742520|0)<<16|o>>>16)+i|0)^i^n)+t[2]-995338651|0)<<23|r>>>9)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+t[0]-198630844|0)<<6|n>>>26)+r|0)|~o))+t[7]+1126891415|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+t[14]-1416354905|0)<<15|o>>>17)+i|0)|~n))+t[5]-57434055|0)<<21|r>>>11)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+t[12]+1700485571|0)<<6|n>>>26)+r|0)|~o))+t[3]-1894986606|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+t[10]-1051523|0)<<15|o>>>17)+i|0)|~n))+t[1]-2054922799|0)<<21|r>>>11)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+t[8]+1873313359|0)<<6|n>>>26)+r|0)|~o))+t[15]-30611744|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+t[6]-1560198380|0)<<15|o>>>17)+i|0)|~n))+t[13]+1309151649|0)<<21|r>>>11)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+t[4]-145523070|0)<<6|n>>>26)+r|0)|~o))+t[11]-1120210379|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+t[2]+718787259|0)<<15|o>>>17)+i|0)|~n))+t[9]-343485551|0)<<21|r>>>11)+o|0,e[0]=n+e[0]|0,e[1]=r+e[1]|0,e[2]=o+e[2]|0,e[3]=i+e[3]|0}function c(e){for(var t=[],n=0;n<64;n+=4)t[n>>2]=e.charCodeAt(n)+(e.charCodeAt(n+1)<<8)+(e.charCodeAt(n+2)<<16)+(e.charCodeAt(n+3)<<24);return t}function f(e){for(var t=[],n=0;n<64;n+=4)t[n>>2]=e[n]+(e[n+1]<<8)+(e[n+2]<<16)+(e[n+3]<<24);return t}function n(e){for(var t,n,r,o,i=e.length,a=[1732584193,-271733879,-1732584194,271733878],s=64;s<=i;s+=64)u(a,c(e.substring(s-64,s)));for(t=(e=e.substring(s-64)).length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],s=0;s<t;s+=1)n[s>>2]|=e.charCodeAt(s)<<(s%4<<3);if(n[s>>2]|=128<<(s%4<<3),55<s)for(u(a,n),s=0;s<16;s+=1)n[s]=0;return o=(o=8*i).toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(o[2],16),o=parseInt(o[1],16)||0,n[14]=r,n[15]=o,u(a,n),a}function a(e){for(var t=0;t<e.length;t+=1)e[t]=function(e){for(var t="",n=0;n<4;n+=1)t+=r[e>>8*n+4&15]+r[e>>8*n&15];return t}(e[t]);return e.join("")}function i(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}function s(e){return e=/[\\u0080-\\uFFFF]/.test(e)?unescape(encodeURIComponent(e)):e}function l(e){for(var t=[],n=e.length,r=0;r<n-1;r+=2)t.push(parseInt(e.substr(r,2),16));return String.fromCharCode.apply(String,t)}function d(){this.reset()}return"5d41402abc4b2a76b9719d911017c592"!==a(n("hello"))&&0,"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(e,t){var n=this.byteLength,r=i(e,n),e=n;return(e=t!==o?i(t,n):e)<r?new ArrayBuffer(0):(t=e-r,n=new ArrayBuffer(t),e=new Uint8Array(n),t=new Uint8Array(this,r,t),e.set(t),n)}),d.prototype.append=function(e){return this.appendBinary(s(e)),this},d.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;for(var t=this._buff.length,n=64;n<=t;n+=64)u(this._hash,c(this._buff.substring(n-64,n)));return this._buff=this._buff.substring(n-64),this},d.prototype.end=function(e){for(var t,n=this._buff,r=n.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=0;i<r;i+=1)o[i>>2]|=n.charCodeAt(i)<<(i%4<<3);return this._finish(o,r),t=a(this._hash),e&&(t=l(t)),this.reset(),t},d.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},d.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},d.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},d.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},d.prototype._finish=function(e,t){var n,r=t;if(e[r>>2]|=128<<(r%4<<3),55<r)for(u(this._hash,e),r=0;r<16;r+=1)e[r]=0;n=(n=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),t=parseInt(n[2],16),n=parseInt(n[1],16)||0,e[14]=t,e[15]=n,u(this._hash,e)},d.hash=function(e,t){return d.hashBinary(s(e),t)},d.hashBinary=function(e,t){e=a(n(e));return t?l(e):e},(d.ArrayBuffer=function(){this.reset()}).prototype.append=function(e){var t,n,r,o,i,a=(n=this._buff.buffer,r=e,o=!0,(i=new Uint8Array(n.byteLength+r.byteLength)).set(new Uint8Array(n)),i.set(new Uint8Array(r),n.byteLength),o?i:i.buffer),s=a.length;for(this._length+=e.byteLength,t=64;t<=s;t+=64)u(this._hash,f(a.subarray(t-64,t)));return this._buff=t-64<s?new Uint8Array(a.buffer.slice(t-64)):new Uint8Array(0),this},d.ArrayBuffer.prototype.end=function(e){for(var t,n=this._buff,r=n.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=0;i<r;i+=1)o[i>>2]|=n[i]<<(i%4<<3);return this._finish(o,r),t=a(this._hash),e&&(t=l(t)),this.reset(),t},d.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},d.ArrayBuffer.prototype.getState=function(){var e,t=d.prototype.getState.call(this);return t.buff=(e=t.buff,String.fromCharCode.apply(null,new Uint8Array(e))),t},d.ArrayBuffer.prototype.setState=function(e){return e.buff=function(e,t){for(var n=e.length,r=new ArrayBuffer(n),o=new Uint8Array(r),i=0;i<n;i+=1)o[i]=e.charCodeAt(i);return t?o:r}(e.buff,!0),d.prototype.setState.call(this,e)},d.ArrayBuffer.prototype.destroy=d.prototype.destroy,d.ArrayBuffer.prototype._finish=d.prototype._finish,d.ArrayBuffer.hash=function(e,t){e=a(function(e){for(var t,n,r,o,i=e.length,a=[1732584193,-271733879,-1732584194,271733878],s=64;s<=i;s+=64)u(a,f(e.subarray(s-64,s)));for(t=(e=s-64<i?e.subarray(s-64):new Uint8Array(0)).length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],s=0;s<t;s+=1)n[s>>2]|=e[s]<<(s%4<<3);if(n[s>>2]|=128<<(s%4<<3),55<s)for(u(a,n),s=0;s<16;s+=1)n[s]=0;return o=(o=8*i).toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(o[2],16),o=parseInt(o[1],16)||0,n[14]=r,n[15]=o,u(a,n),a}(new Uint8Array(e)));return t?l(e):e},d})},{}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;const r=[];for(let e=0;e<256;++e)r.push((e+256).toString(16).substr(1));n.default=function(e,t){var n=t||0;return((t=r)[e[n+0]]+t[e[n+1]]+t[e[n+2]]+t[e[n+3]]+"-"+t[e[n+4]]+t[e[n+5]]+"-"+t[e[n+6]]+t[e[n+7]]+"-"+t[e[n+8]]+t[e[n+9]]+"-"+t[e[n+10]]+t[e[n+11]]+t[e[n+12]]+t[e[n+13]]+t[e[n+14]]+t[e[n+15]]).toLowerCase()}},{}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"v1",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"v3",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"v4",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"v5",{enumerable:!0,get:function(){return a.default}});var r=s(e(26)),o=s(e(27)),i=s(e(29)),a=s(e(30));function s(e){return e&&e.__esModule?e:{default:e}}},{26:26,27:27,29:29,30:30}],23:[function(e,t,n){"use strict";function f(e){return 14+(e+64>>>9<<4)+1}function l(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function s(e,t,n,r,o,i){return l((i=l(l(t,e),l(r,i)))<<o|i>>>32-o,n)}function d(e,t,n,r,o,i,a){return s(t&n|~t&r,e,t,o,i,a)}function p(e,t,n,r,o,i,a){return s(t&r|n&~r,e,t,o,i,a)}function h(e,t,n,r,o,i,a){return s(t^n^r,e,t,o,i,a)}function v(e,t,n,r,o,i,a){return s(n^(t|~r),e,t,o,i,a)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.default=function(t){if("string"==typeof t){const n=unescape(encodeURIComponent(t));t=new Uint8Array(n.length);for(let e=0;e<n.length;++e)t[e]=n.charCodeAt(e)}return function(t){const n=[],r=32*t.length,o="0123456789abcdef";for(let e=0;e<r;e+=8){var i=t[e>>5]>>>e%32&255,i=parseInt(o.charAt(i>>>4&15)+o.charAt(15&i),16);n.push(i)}return n}(function(t,e){t[e>>5]|=128<<e%32,t[f(e)-1]=e;let n=1732584193,r=-271733879,o=-1732584194,i=271733878;for(let e=0;e<t.length;e+=16){var a=n,s=r,u=o,c=i;n=d(n,r,o,i,t[e],7,-680876936),i=d(i,n,r,o,t[e+1],12,-389564586),o=d(o,i,n,r,t[e+2],17,606105819),r=d(r,o,i,n,t[e+3],22,-1044525330),n=d(n,r,o,i,t[e+4],7,-176418897),i=d(i,n,r,o,t[e+5],12,1200080426),o=d(o,i,n,r,t[e+6],17,-1473231341),r=d(r,o,i,n,t[e+7],22,-45705983),n=d(n,r,o,i,t[e+8],7,1770035416),i=d(i,n,r,o,t[e+9],12,-1958414417),o=d(o,i,n,r,t[e+10],17,-42063),r=d(r,o,i,n,t[e+11],22,-1990404162),n=d(n,r,o,i,t[e+12],7,1804603682),i=d(i,n,r,o,t[e+13],12,-40341101),o=d(o,i,n,r,t[e+14],17,-1502002290),r=d(r,o,i,n,t[e+15],22,1236535329),n=p(n,r,o,i,t[e+1],5,-165796510),i=p(i,n,r,o,t[e+6],9,-1069501632),o=p(o,i,n,r,t[e+11],14,643717713),r=p(r,o,i,n,t[e],20,-373897302),n=p(n,r,o,i,t[e+5],5,-701558691),i=p(i,n,r,o,t[e+10],9,38016083),o=p(o,i,n,r,t[e+15],14,-660478335),r=p(r,o,i,n,t[e+4],20,-405537848),n=p(n,r,o,i,t[e+9],5,568446438),i=p(i,n,r,o,t[e+14],9,-1019803690),o=p(o,i,n,r,t[e+3],14,-187363961),r=p(r,o,i,n,t[e+8],20,1163531501),n=p(n,r,o,i,t[e+13],5,-1444681467),i=p(i,n,r,o,t[e+2],9,-51403784),o=p(o,i,n,r,t[e+7],14,1735328473),r=p(r,o,i,n,t[e+12],20,-1926607734),n=h(n,r,o,i,t[e+5],4,-378558),i=h(i,n,r,o,t[e+8],11,-2022574463),o=h(o,i,n,r,t[e+11],16,1839030562),r=h(r,o,i,n,t[e+14],23,-35309556),n=h(n,r,o,i,t[e+1],4,-1530992060),i=h(i,n,r,o,t[e+4],11,1272893353),o=h(o,i,n,r,t[e+7],16,-155497632),r=h(r,o,i,n,t[e+10],23,-1094730640),n=h(n,r,o,i,t[e+13],4,681279174),i=h(i,n,r,o,t[e],11,-358537222),o=h(o,i,n,r,t[e+3],16,-722521979),r=h(r,o,i,n,t[e+6],23,76029189),n=h(n,r,o,i,t[e+9],4,-640364487),i=h(i,n,r,o,t[e+12],11,-421815835),o=h(o,i,n,r,t[e+15],16,530742520),r=h(r,o,i,n,t[e+2],23,-995338651),n=v(n,r,o,i,t[e],6,-198630844),i=v(i,n,r,o,t[e+7],10,1126891415),o=v(o,i,n,r,t[e+14],15,-1416354905),r=v(r,o,i,n,t[e+5],21,-57434055),n=v(n,r,o,i,t[e+12],6,1700485571),i=v(i,n,r,o,t[e+3],10,-1894986606),o=v(o,i,n,r,t[e+10],15,-1051523),r=v(r,o,i,n,t[e+1],21,-2054922799),n=v(n,r,o,i,t[e+8],6,1873313359),i=v(i,n,r,o,t[e+15],10,-30611744),o=v(o,i,n,r,t[e+6],15,-1560198380),r=v(r,o,i,n,t[e+13],21,1309151649),n=v(n,r,o,i,t[e+4],6,-145523070),i=v(i,n,r,o,t[e+11],10,-1120210379),o=v(o,i,n,r,t[e+2],15,718787259),r=v(r,o,i,n,t[e+9],21,-343485551),n=l(n,a),r=l(r,s),o=l(o,u),i=l(i,c)}return[n,r,o,i]}(function(t){if(0===t.length)return[];const n=8*t.length,r=new Uint32Array(f(n));for(let e=0;e<n;e+=8)r[e>>5]|=(255&t[e/8])<<e%32;return r}(t),8*t.length))}},{}],24:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){if(r)return r(o);throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported")};const r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),o=new Uint8Array(16)},{}],25:[function(e,t,n){"use strict";function l(e,t){return e<<t|e>>>32-t}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.default=function(n){var s=[1518500249,1859775393,2400959708,3395469782];const e=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof n){const o=unescape(encodeURIComponent(n));n=[];for(let e=0;e<o.length;++e)n.push(o.charCodeAt(e))}n.push(128);var t=n.length/4+2,r=Math.ceil(t/16);const u=new Array(r);for(let t=0;t<r;++t){const i=new Uint32Array(16);for(let e=0;e<16;++e)i[e]=n[64*t+4*e]<<24|n[64*t+4*e+1]<<16|n[64*t+4*e+2]<<8|n[64*t+4*e+3];u[t]=i}u[r-1][14]=8*(n.length-1)/Math.pow(2,32),u[r-1][14]=Math.floor(u[r-1][14]),u[r-1][15]=8*(n.length-1)&4294967295;for(let a=0;a<r;++a){const f=new Uint32Array(80);for(let e=0;e<16;++e)f[e]=u[a][e];for(let e=16;e<80;++e)f[e]=l(f[e-3]^f[e-8]^f[e-14]^f[e-16],1);let t=e[0],n=e[1],r=e[2],o=e[3],i=e[4];for(let e=0;e<80;++e){var c=Math.floor(e/20),c=l(t,5)+function(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:return t^n^r;case 2:return t&n^t&r^n&r;case 3:return t^n^r}}(c,n,r,o)+i+s[c]+f[e]>>>0;i=o,o=r,r=l(n,30)>>>0,n=t,t=c}e[0]=e[0]+t>>>0,e[1]=e[1]+n>>>0,e[2]=e[2]+r>>>0,e[3]=e[3]+o>>>0,e[4]=e[4]+i>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,255&e[0],e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,255&e[1],e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,255&e[2],e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,255&e[3],e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,255&e[4]]}},{}],26:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var f=r(e(24)),l=r(e(21));function r(e){return e&&e.__esModule?e:{default:e}}let d,p,h=0,v=0;n.default=function(e,t,n){var r=t&&n||0;const o=t||[];let i=(e=e||{}).node||d,a=void 0!==e.clockseq?e.clockseq:p;null!=i&&null!=a||(c=e.random||(e.rng||f.default)(),null==i&&(i=d=[1|c[0],c[1],c[2],c[3],c[4],c[5]]),null==a&&(a=p=16383&(c[6]<<8|c[7])));let s=void 0!==e.msecs?e.msecs:Date.now(),u=void 0!==e.nsecs?e.nsecs:v+1;var c=s-h+(u-v)/1e4;if(c<0&&void 0===e.clockseq&&(a=a+1&16383),(c<0||s>h)&&void 0===e.nsecs&&(u=0),1e4<=u)throw new Error("uuid.v1(): Can\'t create more than 10M uuids/sec");h=s,v=u,p=a,s+=122192928e5,e=(1e4*(268435455&s)+u)%4294967296,o[r++]=e>>>24&255,o[r++]=e>>>16&255,o[r++]=e>>>8&255,o[r++]=255&e,e=s/4294967296*1e4&268435455,o[r++]=e>>>8&255,o[r++]=255&e,o[r++]=e>>>24&15|16,o[r++]=e>>>16&255,o[r++]=a>>>8|128,o[r++]=255&a;for(let e=0;e<6;++e)o[r+e]=i[e];return t||(0,l.default)(o)}},{21:21,24:24}],27:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e(28)),e=o(e(23));function o(e){return e&&e.__esModule?e:{default:e}}e=(0,r.default)("v3",48,e.default);n.default=e},{23:23,28:28}],28:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,a,s){function t(e,t,n,r){var o=n&&r||0;if("string"==typeof e&&(e=function(t){t=unescape(encodeURIComponent(t));const n=[];for(let e=0;e<t.length;++e)n.push(t.charCodeAt(e));return n}(e)),"string"==typeof t&&(t=function(e){const t=[];return e.replace(/[a-fA-F0-9]{2}/g,function(e){t.push(parseInt(e,16))}),t}(t)),!Array.isArray(e))throw TypeError("value must be an array of bytes");if(!Array.isArray(t)||16!==t.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");const i=s(t.concat(e));if(i[6]=15&i[6]|a,i[8]=63&i[8]|128,n)for(let e=0;e<16;++e)n[o+e]=i[e];return n||(0,u.default)(i)}try{t.name=e}catch(e){}return t.DNS=r,t.URL=o,t},n.URL=n.DNS=void 0;var u=(e=e(21))&&e.__esModule?e:{default:e};const r="6ba7b810-9dad-11d1-80b4-00c04fd430c8";n.DNS=r;const o="6ba7b811-9dad-11d1-80b4-00c04fd430c8";n.URL=o},{21:21}],29:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e(24)),a=r(e(21));function r(e){return e&&e.__esModule?e:{default:e}}n.default=function(e,t,n){"string"==typeof e&&(t="binary"===e?new Uint8Array(16):null,e=null);const r=(e=e||{}).random||(e.rng||i.default)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){var o=n||0;for(let e=0;e<16;++e)t[o+e]=r[e];return t}return(0,a.default)(r)}},{21:21,24:24}],30:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e(28)),e=o(e(25));function o(e){return e&&e.__esModule?e:{default:e}}e=(0,r.default)("v5",80,e.default);n.default=e},{25:25,28:28}],31:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var l=e(40),a=e(52),s=e(39),h=e(38),v=e(96),y=e(97);function r(e){return e.reduce(function(e,t){return e[t]=!0,e},{})}var d=r(["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),p=r(["_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);function _(e){if(!/^\\d+-/.test(e))return v.createError(v.INVALID_REV);var t=e.indexOf("-"),n=e.substring(0,t),t=e.substring(t+1);return{prefix:parseInt(n,10),id:t}}function m(e,t,n){var r,o,i;n=n||{deterministic_revs:!0};var a={status:"available"};if(e._deleted&&(a.deleted=!0),t)if(e._id||(e._id=l.uuid()),o=l.rev(e,n.deterministic_revs),e._rev){if((i=_(e._rev)).error)return i;e._rev_tree=[{pos:i.prefix,ids:[i.id,{status:"missing"},[[o,a,[]]]]}],r=i.prefix+1}else e._rev_tree=[{pos:1,ids:[o,a,[]]}],r=1;else if(e._revisions&&(e._rev_tree=function(e,t){for(var n=e.start-e.ids.length+1,r=e.ids,o=[r[0],t,[]],i=1,a=r.length;i<a;i++)o=[r[i],{status:"missing"},[o]];return[{pos:n,ids:o}]}(e._revisions,a),r=e._revisions.start,o=e._revisions.ids[0]),!e._rev_tree){if((i=_(e._rev)).error)return i;r=i.prefix,o=i.id,e._rev_tree=[{pos:r,ids:[o,a,[]]}]}l.invalidIdError(e._id),e._rev=r+"-"+o;var s,u={metadata:{},data:{}};for(s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var c="_"===s[0];if(c&&!d[s]){var f=v.createError(v.DOC_VALIDATION,s);throw f.message=v.DOC_VALIDATION.message+": "+s,f}c&&!p[s]?u.metadata[s.slice(1)]=e[s]:u.data[s]=e[s]}return u}function u(t,e,n){var r=function(e){try{return a.atob(e)}catch(e){return{error:v.createError(v.BAD_ARG,"Attachment is not a valid base64 string")}}}(t.data);if(r.error)return n(r.error);t.length=r.length,t.data="blob"===e?a.binaryStringToBlobOrBuffer(r,t.content_type):"base64"===e?a.btoa(r):r,s.binaryMd5(r,function(e){t.digest="md5-"+e,n()})}function c(e,t,n){if(e.stub)return n();var r,o,i;"string"==typeof e.data?u(e,t,n):(r=e,o=t,i=n,s.binaryMd5(r.data,function(e){r.digest="md5-"+e,r.length=r.data.size||r.data.length||0,"binary"===o?a.blobOrBufferToBinaryString(r.data,function(e){r.data=e,i()}):"base64"===o?a.blobOrBufferToBase64(r.data,function(e){r.data=e,i()}):i()}))}function g(e,t,n,r,o,i,a,s){if(y.revExists(t.rev_tree,n.metadata.rev)&&!s)return r[o]=n,i();var u=t.winningRev||y.winningRev(t),c="deleted"in t?t.deleted:y.isDeleted(t,u),f="deleted"in n.metadata?n.metadata.deleted:y.isDeleted(n.metadata),l=/^1-/.test(n.metadata.rev);c&&!f&&s&&l&&((l=n.data)._rev=u,l._id=n.metadata.id,n=m(l,s));e=y.merge(t.rev_tree,n.metadata.rev_tree[0],e);if(s&&(c&&f&&"new_leaf"!==e.conflicts||!c&&"new_leaf"!==e.conflicts||c&&!f&&"new_branch"===e.conflicts)){var d=v.createError(v.REV_CONFLICT);return r[o]=d,i()}var d=n.metadata.rev;n.metadata.rev_tree=e.tree,n.stemmedRevs=e.stemmedRevs||[],t.rev_map&&(n.metadata.rev_map=t.rev_map);e=y.winningRev(n.metadata),t=y.isDeleted(n.metadata,e),c=c===t?0:c<t?-1:1,d=d===e?t:y.isDeleted(n.metadata,d);a(n,e,t,d,!0,c,o,i)}n.invalidIdError=l.invalidIdError,n.normalizeDdocFunctionName=l.normalizeDdocFunctionName,n.parseDdocFunctionName=l.parseDdocFunctionName,n.isDeleted=y.isDeleted,n.isLocalId=y.isLocalId,n.allDocsKeysQuery=function(e,i){var t=i.keys,a={offset:i.skip};return Promise.all(t.map(function(o){var t=l.assign({key:o,deleted:"ok"},i);return["limit","skip","keys"].forEach(function(e){delete t[e]}),new Promise(function(n,r){e._allDocs(t,function(e,t){return e?r(e):(i.update_seq&&void 0!==t.update_seq&&(a.update_seq=t.update_seq),a.total_rows=t.total_rows,void n(t.rows[0]||{key:o,error:"not_found"}))})})})).then(function(e){return a.rows=e,a})},n.parseDoc=m,n.preprocessAttachments=function(e,i,t){if(!e.length)return t();var a,n=0;function s(){n++,e.length===n&&(a?t(a):t())}e.forEach(function(e){var t,n=e.data&&e.data._attachments?Object.keys(e.data._attachments):[],r=0;if(!n.length)return s();function o(e){a=e,++r===n.length&&s()}for(t in e.data._attachments)e.data._attachments.hasOwnProperty(t)&&c(e.data._attachments[t],i,o)})},n.processDocs=function(s,e,r,u,o,c,f,l,t){s=s||1e3;var d=l.new_edits,i=new h.Map,n=0,a=e.length;function p(){++n===a&&t&&t()}e.forEach(function(e,n){var t;e._id&&y.isLocalId(e._id)?(t=e._deleted?"_removeLocal":"_putLocal",r[t](e,{ctx:o},function(e,t){c[n]=e||t,p()})):(t=e.metadata.id,i.has(t)?(a--,i.get(t).push([e,n])):i.set(t,[[e,n]]))}),i.forEach(function(r,o){var i=0;function a(){(++i<r.length?e:p)()}function e(){var e=r[i],t=e[0],n=e[1];u.has(o)?g(s,u.get(o),t,c,n,a,f,d):(e=y.merge([],t.metadata.rev_tree[0],s),t.metadata.rev_tree=e.tree,t.stemmedRevs=e.stemmedRevs||[],function(e,t,n){var r=y.winningRev(e.metadata),o=y.isDeleted(e.metadata,r);if("was_delete"in l&&o)return c[t]=v.createError(v.MISSING_DOC,"deleted"),n();if(d&&"missing"===e.metadata.rev_tree[0].ids[1].status){var i=v.createError(v.REV_CONFLICT);return c[t]=i,n()}f(e,r,o,o,!1,o?0:1,t,n)}(t,n,a))}e()})},n.updateDoc=g},{38:38,39:39,40:40,52:52,96:96,97:97}],32:[function(e,t,n){arguments[4][11][0].apply(n,arguments)},{11:11,33:33,34:34,35:35,36:36,37:37,7:7}],33:[function(e,t,n){arguments[4][12][0].apply(n,arguments)},{12:12}],34:[function(e,t,n){arguments[4][13][0].apply(n,arguments)},{13:13}],35:[function(e,t,n){arguments[4][14][0].apply(n,arguments)},{14:14}],36:[function(e,t,n){arguments[4][15][0].apply(n,arguments)},{15:15}],37:[function(e,t,n){arguments[4][16][0].apply(n,arguments)},{16:16}],38:[function(e,t,n){arguments[4][17][0].apply(n,arguments)},{17:17}],39:[function(e,t,n){arguments[4][18][0].apply(n,arguments)},{18:18,41:41,52:52}],40:[function(e,t,n){arguments[4][19][0].apply(n,arguments)},{19:19,32:32,38:38,39:39,43:43,6:6,8:8,9:9,96:96}],41:[function(e,t,n){arguments[4][20][0].apply(n,arguments)},{20:20}],42:[function(e,t,n){arguments[4][21][0].apply(n,arguments)},{21:21}],43:[function(e,t,n){arguments[4][22][0].apply(n,arguments)},{22:22,47:47,48:48,50:50,51:51}],44:[function(e,t,n){arguments[4][23][0].apply(n,arguments)},{23:23}],45:[function(e,t,n){arguments[4][24][0].apply(n,arguments)},{24:24}],46:[function(e,t,n){arguments[4][25][0].apply(n,arguments)},{25:25}],47:[function(e,t,n){arguments[4][26][0].apply(n,arguments)},{26:26,42:42,45:45}],48:[function(e,t,n){arguments[4][27][0].apply(n,arguments)},{27:27,44:44,49:49}],49:[function(e,t,n){arguments[4][28][0].apply(n,arguments)},{28:28,42:42}],50:[function(e,t,n){arguments[4][29][0].apply(n,arguments)},{29:29,42:42,45:45}],51:[function(e,t,n){arguments[4][30][0].apply(n,arguments)},{30:30,46:46,49:49}],52:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(e){return atob(e)}function o(e){return btoa(e)}function i(t,n){t=t||[],n=n||{};try{return new Blob(t,n)}catch(e){if("TypeError"!==e.name)throw e;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),o=0;o<t.length;o+=1)r.append(t[o]);return r.getBlob(n.type)}}function a(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;o<t;o++)r[o]=e.charCodeAt(o);return n}function s(e,t){return i([a(e)],{type:t})}function u(e,t){var n=new FileReader,r="function"==typeof n.readAsBinaryString;n.onloadend=function(e){e=e.target.result||"";if(r)return t(e);t(function(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,o=0;o<r;o++)t+=String.fromCharCode(n[o]);return t}(e))},r?n.readAsBinaryString(e):n.readAsArrayBuffer(e)}function c(e,t){u(e,function(e){t(e)})}n.atob=r,n.btoa=o,n.base64StringToBlobOrBuffer=function(e,t){return s(r(e),t)},n.binaryStringToArrayBuffer=a,n.binaryStringToBlobOrBuffer=s,n.blob=i,n.blobOrBufferToBase64=function(e,t){c(e,function(e){t(o(e))})},n.blobOrBufferToBinaryString=c,n.readAsArrayBuffer=function(e,t){var n=new FileReader;n.onloadend=function(e){e=e.target.result||new ArrayBuffer(0);t(e)},n.readAsArrayBuffer(e)},n.readAsBinaryString=u,n.typedBuffer=function(){}},{}],53:[function(e,t,n){"use strict";var s=e(96),u=e(98),c=e(62);function r(e,t){if(e.selector&&e.filter&&"_selector"!==e.filter){e="string"==typeof e.filter?e.filter:"function";return t(new Error(\'selector invalid for filter "\'+e+\'"\'))}t()}function o(e){e.view&&!e.filter&&(e.filter="_view"),e.selector&&!e.filter&&(e.filter="_selector"),e.filter&&"string"==typeof e.filter&&("_view"===e.filter?e.view=c.normalizeDdocFunctionName(e.view):e.filter=c.normalizeDdocFunctionName(e.filter))}function i(e,t){return t.filter&&"string"==typeof t.filter&&!t.doc_ids&&!c.isRemote(e.db)}function a(n,r){var o,i=r.complete;if("_view"===r.filter){if(!r.view||"string"!=typeof r.view){var e=s.createError(s.BAD_REQUEST,"`view` filter parameter not found or invalid.");return i(e)}var a=c.parseDdocFunctionName(r.view);n.db.get("_design/"+a[0],function(e,t){if(n.isCancelled)return i(null,{status:"cancelled"});if(e)return i(s.generateErrorFromResponse(e));var e=t&&t.views&&t.views[a[1]]&&t.views[a[1]].map;if(!e)return i(s.createError(s.MISSING_DOC,t.views?"missing json key: "+a[1]:"missing json key: views"));r.filter=(e=["return function(doc) {",\'  "use strict";\',"  var emitted = false;","  var emit = function (a, b) {","    emitted = true;","  };","  var view = "+(e=e)+";","  view(doc);","  if (emitted) {","    return true;","  }","};"].join("\\n"),c.scopeEval(e,{})),n.doChanges(r)})}else r.selector?(r.filter=function(e){return u.matchesSelector(e,r.selector)},n.doChanges(r)):(o=c.parseDdocFunctionName(r.filter),n.db.get("_design/"+o[0],function(e,t){if(n.isCancelled)return i(null,{status:"cancelled"});if(e)return i(s.generateErrorFromResponse(e));e=t&&t.filters&&t.filters[o[1]];if(!e)return i(s.createError(s.MISSING_DOC,t&&t.filters?"missing json key: "+o[1]:"missing json key: filters"));r.filter=c.scopeEval(\'"use strict";\\nreturn \'+e+";",{}),n.doChanges(r)}))}t.exports=function(e){e._changesFilterPlugin={validate:r,normalize:o,shouldFilter:i,filter:a}}},{62:62,96:96,98:98}],54:[function(e,t,n){arguments[4][11][0].apply(n,arguments)},{11:11,55:55,56:56,57:57,58:58,59:59,7:7}],55:[function(e,t,n){arguments[4][12][0].apply(n,arguments)},{12:12}],56:[function(e,t,n){arguments[4][13][0].apply(n,arguments)},{13:13}],57:[function(e,t,n){arguments[4][14][0].apply(n,arguments)},{14:14}],58:[function(e,t,n){arguments[4][15][0].apply(n,arguments)},{15:15}],59:[function(e,t,n){arguments[4][16][0].apply(n,arguments)},{16:16}],60:[function(e,t,n){arguments[4][17][0].apply(n,arguments)},{17:17}],61:[function(e,t,n){arguments[4][18][0].apply(n,arguments)},{18:18,52:52,63:63}],62:[function(e,t,n){arguments[4][19][0].apply(n,arguments)},{19:19,54:54,6:6,60:60,61:61,65:65,8:8,9:9,96:96}],63:[function(e,t,n){arguments[4][20][0].apply(n,arguments)},{20:20}],64:[function(e,t,n){arguments[4][21][0].apply(n,arguments)},{21:21}],65:[function(e,t,n){arguments[4][22][0].apply(n,arguments)},{22:22,69:69,70:70,72:72,73:73}],66:[function(e,t,n){arguments[4][23][0].apply(n,arguments)},{23:23}],67:[function(e,t,n){arguments[4][24][0].apply(n,arguments)},{24:24}],68:[function(e,t,n){arguments[4][25][0].apply(n,arguments)},{25:25}],69:[function(e,t,n){arguments[4][26][0].apply(n,arguments)},{26:26,64:64,67:67}],70:[function(e,t,n){arguments[4][27][0].apply(n,arguments)},{27:27,66:66,71:71}],71:[function(e,t,n){arguments[4][28][0].apply(n,arguments)},{28:28,64:64}],72:[function(e,t,n){arguments[4][29][0].apply(n,arguments)},{29:29,64:64,67:67}],73:[function(e,t,n){arguments[4][30][0].apply(n,arguments)},{30:30,68:68,71:71}],74:[function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var i=e(81),a=r(e(6)),w=e(97),u=e(96),c=e(84),o=r(e(9)),s=r(e(8)),f=e(82),e=r(e(53));function l(n,t,r){s.call(this);var o=this;this.db=n;var i=(t=t?c.clone(t):{}).complete=c.once(function(e,t){e?0<c.listenerCount(o,"error")&&o.emit("error",e):o.emit("complete",t),o.removeAllListeners(),n.removeListener("destroyed",a)});function a(){o.cancel()}r&&(o.on("complete",function(e){r(null,e)}),o.on("error",r)),n.once("destroyed",a),t.onChange=function(e,t,n){o.isCancelled||function(e,t,n,r){try{e.emit("change",t,n,r)}catch(e){c.guardedConsole("error",\'Error in .on("change", function):\',e)}}(o,e,t,n)};var e=new Promise(function(n,r){t.complete=function(e,t){e?r(e):n(t)}});o.once("cancel",function(){n.removeListener("destroyed",a),t.complete(null,{status:"cancelled"})}),this.then=e.then.bind(e),this.catch=e.catch.bind(e),this.then(function(e){i(null,e)},i),n.taskqueue.isReady?o.validateChanges(t):n.taskqueue.addTask(function(e){e?t.complete(e):o.isCancelled?o.emit("cancel"):o.validateChanges(t)})}function d(e,t,n){var r=[{rev:e._rev}];"all_docs"===n.style&&(r=w.collectLeaves(t.rev_tree).map(function(e){return{rev:e.rev}}));r={id:t.id,changes:r,doc:e};return w.isDeleted(t,e._rev)&&(r.deleted=!0),n.conflicts&&(r.doc._conflicts=w.collectConflicts(t),r.doc._conflicts.length||delete r.doc._conflicts),r}function p(e,t){return e<t?-1:t<e?1:0}function h(n,r){return function(e,t){e||t[0]&&t[0].error?((e=e||t[0]).docId=r,n(e)):n(null,t.length?t[0]:t)}}function v(e,t){var n=p(e._id,t._id);return 0!==n?n:p(e._revisions?e._revisions.start:0,t._revisions?t._revisions.start:0)}function y(){for(var e in s.call(this),y.prototype)"function"==typeof this[e]&&(this[e]=this[e].bind(this))}function _(){this.isReady=!1,this.failed=!1,this.queue=[]}function m(e,t){if(!(this instanceof m))return new m(e,t);var o=this;if(t=t||{},e&&"object"==typeof e&&(e=(t=e).name,delete t.name),void 0===t.deterministic_revs&&(t.deterministic_revs=!0),this.__opts=t=c.clone(t),o.auto_compaction=t.auto_compaction,o.prefix=m.prefix,"string"!=typeof e)throw new Error("Missing/invalid DB name");var n=function(e,t){var n=e.match(/([a-z-]*):\\/\\/(.*)/);if(n)return{name:/https?/.test(n[1])?n[1]+"://"+n[2]:n[2],adapter:n[1]};var r=m.adapters,o=m.preferredAdapters,i=m.prefix,a=t.adapter;if(!a)for(var s=0;s<o.length&&("idb"===(a=o[s])&&"websql"in r&&c.hasLocalStorage()&&localStorage["_pouch__websqldb_"+i+e]);++s)c.guardedConsole("log",\'PouchDB is downgrading "\'+e+\'" to WebSQL to avoid data loss, because it was already opened with WebSQL.\');return{name:!((t=r[a])&&"use_prefix"in t)||t.use_prefix?i+e:e,adapter:a}}((t.prefix||"")+e,t);if(t.name=n.name,t.adapter=t.adapter||n.adapter,o.name=e,o._adapter=t.adapter,m.emit("debug",["adapter","Picked adapter: ",t.adapter]),!m.adapters[t.adapter]||!m.adapters[t.adapter].valid())throw new Error("Invalid Adapter: "+t.adapter);y.call(o),o.taskqueue=new _,o.adapter=t.adapter,m.adapters[t.adapter].call(o,t,function(e){return e?o.taskqueue.fail(e):((r=o).once("destroyed",t),r.once("closed",n),r.constructor.emit("ref",r),o.emit("created",o),m.emit("created",o.name),void o.taskqueue.ready(o));function t(e){r.removeListener("closed",n),e||r.constructor.emit("destroyed",r.name)}function n(){r.removeListener("destroyed",t),r.constructor.emit("unref",r)}var r})}o(l,s),l.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")},l.prototype.validateChanges=function(t){var n=t.complete,r=this;m._changesFilterPlugin?m._changesFilterPlugin.validate(t,function(e){return e?n(e):void r.doChanges(t)}):r.doChanges(t)},l.prototype.doChanges=function(t){var n=this,r=t.complete;if("live"in(t=c.clone(t))&&!("continuous"in t)&&(t.continuous=t.live),t.processChange=d,"latest"===t.since&&(t.since="now"),t.since||(t.since=0),"now"!==t.since){if(m._changesFilterPlugin){if(m._changesFilterPlugin.normalize(t),m._changesFilterPlugin.shouldFilter(this,t))return m._changesFilterPlugin.filter(this,t)}else["doc_ids","filter","selector","view"].forEach(function(e){e in t&&c.guardedConsole("warn",\'The "\'+e+\'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.\')});"descending"in t||(t.descending=!1),t.limit=0===t.limit?1:t.limit,t.complete=r;var o,i=this.db._changes(t);i&&"function"==typeof i.cancel&&(o=n.cancel,n.cancel=a(function(e){i.cancel(),o.apply(this,e)}))}else this.db.info().then(function(e){n.isCancelled?r(null,{status:"cancelled"}):(t.since=e.update_seq,n.doChanges(t))},r)},o(y,s),y.prototype.post=c.adapterFun("post",function(e,t,n){return"function"==typeof t&&(n=t,t={}),"object"!=typeof e||Array.isArray(e)?n(u.createError(u.NOT_AN_OBJECT)):void this.bulkDocs({docs:[e]},t,h(n,e._id))}),y.prototype.put=c.adapterFun("put",function(n,t,r){if("function"==typeof t&&(r=t,t={}),"object"!=typeof n||Array.isArray(n))return r(u.createError(u.NOT_AN_OBJECT));if(c.invalidIdError(n._id),w.isLocalId(n._id)&&"function"==typeof this._putLocal)return n._deleted?this._removeLocal(n,r):this._putLocal(n,r);var e,o,i,a=this;function s(e){"function"==typeof a._put&&!1!==t.new_edits?a._put(n,t,e):a.bulkDocs({docs:[n]},t,h(e,n._id))}t.force&&n._rev?(e=n._rev.split("-"),o=e[1],i=parseInt(e[0],10)+1,e=c.rev(),n._revisions={start:i,ids:[e,o]},n._rev=i+"-"+e,t.new_edits=!1,s(function(e){var t=e?null:{ok:!0,id:n._id,rev:n._rev};r(e,t)})):s(r)}),y.prototype.putAttachment=c.adapterFun("putAttachment",function(t,n,r,o,i){var a=this;function s(e){var t="_rev"in e?parseInt(e._rev,10):0;return e._attachments=e._attachments||{},e._attachments[n]={content_type:i,data:o,revpos:++t},a.put(e)}return"function"==typeof i&&(i=o,o=r,r=null),void 0===i&&(i=o,o=r,r=null),i||c.guardedConsole("warn","Attachment",n,"on document",t,"is missing content_type"),a.get(t).then(function(e){if(e._rev!==r)throw u.createError(u.REV_CONFLICT);return s(e)},function(e){if(e.reason===u.MISSING_DOC.message)return s({_id:t});throw e})}),y.prototype.removeAttachment=c.adapterFun("removeAttachment",function(e,n,r,o){var i=this;i.get(e,function(e,t){if(e)o(e);else if(t._rev===r){if(!t._attachments)return o();delete t._attachments[n],0===Object.keys(t._attachments).length&&delete t._attachments,i.put(t,o)}else o(u.createError(u.REV_CONFLICT))})}),y.prototype.remove=c.adapterFun("remove",function(e,t,n,r){var o;"string"==typeof t?(o={_id:e,_rev:t},"function"==typeof n&&(r=n,n={})):(o=e,n="function"==typeof t?(r=t,{}):(r=n,t)),(n=n||{}).was_delete=!0;t={_id:o._id,_rev:o._rev||n.rev,_deleted:!0};if(w.isLocalId(t._id)&&"function"==typeof this._removeLocal)return this._removeLocal(o,r);this.bulkDocs({docs:[t]},n,h(r,t._id))}),y.prototype.revsDiff=c.adapterFun("revsDiff",function(o,e,s){"function"==typeof e&&(s=e,e={});var u=Object.keys(o);if(!u.length)return s(null,{});var c=0,f=new i.Map;function l(e,t){f.has(e)||f.set(e,{missing:[]}),f.get(e).missing.push(t)}u.map(function(r){this._getRevisionTree(r,function(e,t){if(e&&404===e.status&&"missing"===e.message)f.set(r,{missing:o[r]});else{if(e)return s(e);t=t,a=o[i=r].slice(0),w.traverseRevTree(t,function(e,t,n,r,o){t=t+"-"+n,n=a.indexOf(t);-1!==n&&(a.splice(n,1),"available"!==o.status&&l(i,t))}),a.forEach(function(e){l(i,e)})}var i,a;if(++c===u.length){var n={};return f.forEach(function(e,t){n[t]=e}),s(null,n)}})},this)}),y.prototype.bulkGet=c.adapterFun("bulkGet",function(e,t){c.bulkGetShim(this,e,t)}),y.prototype.compactDocument=c.adapterFun("compactDocument",function(r,u,c){var f=this;this._getRevisionTree(r,function(e,t){if(e)return c(e);var o,i,n=(o={},i=[],w.traverseRevTree(t,function(e,t,n,r){n=t+"-"+n;return e&&(o[n]=0),void 0!==r&&i.push({from:r,to:n}),n}),i.reverse(),i.forEach(function(e){void 0===o[e.from]?o[e.from]=1+o[e.to]:o[e.from]=Math.min(o[e.from],1+o[e.to])}),o),a=[],s=[];Object.keys(n).forEach(function(e){n[e]>u&&a.push(e)}),w.traverseRevTree(t,function(e,t,n,r,o){n=t+"-"+n;"available"===o.status&&-1!==a.indexOf(n)&&s.push(n)}),f._doCompaction(r,s,c)})}),y.prototype.compact=c.adapterFun("compact",function(e,t){"function"==typeof e&&(t=e,e={});var n=this;e=e||{},n._compactionQueue=n._compactionQueue||[],n._compactionQueue.push({opts:e,callback:t}),1===n._compactionQueue.length&&function n(r){var e=r._compactionQueue[0],t=e.opts,o=e.callback;r.get("_local/compaction").catch(function(){return!1}).then(function(e){e&&e.last_seq&&(t.last_seq=e.last_seq),r._compact(t,function(e,t){e?o(e):o(null,t),c.nextTick(function(){r._compactionQueue.shift(),r._compactionQueue.length&&n(r)})})})}(n)}),y.prototype._compact=function(e,n){var r=this,e={return_docs:!1,last_seq:e.last_seq||0},o=[];r.changes(e).on("change",function(e){o.push(r.compactDocument(e.id,0))}).on("complete",function(e){var t=e.last_seq;Promise.all(o).then(function(){return c.upsert(r,"_local/compaction",function(e){return(!e.last_seq||e.last_seq<t)&&(e.last_seq=t,e)})}).then(function(){n(null,{ok:!0})}).catch(n)}).on("error",n)},y.prototype.get=c.adapterFun("get",function(_,m,g){if("function"==typeof m&&(g=m,m={}),"string"!=typeof _)return g(u.createError(u.INVALID_ID));if(w.isLocalId(_)&&"function"==typeof this._getLocal)return this._getLocal(_,g);var n=[],b=this;function r(){var a=[],s=n.length;if(!s)return g(null,a);n.forEach(function(i){b.get(_,{rev:i,revs:m.revs,latest:m.latest,attachments:m.attachments,binary:m.binary},function(e,t){if(e)a.push({missing:i});else{for(var n,r=0,o=a.length;r<o;r++)if(a[r].ok&&a[r].ok._rev===t._rev){n=!0;break}n||a.push({ok:t})}--s||g(null,a)})})}if(!m.open_revs)return this._get(_,m,function(e,t){if(e)return e.docId=_,g(e);var o=t.doc,n=t.metadata,i=t.ctx;if(!m.conflicts||(r=w.collectConflicts(n)).length&&(o._conflicts=r),w.isDeleted(n,o._rev)&&(o._deleted=!0),m.revs||m.revs_info){for(var r=o._rev.split("-"),a=parseInt(r[0],10),s=r[1],u=w.rootToLeaf(n.rev_tree),c=null,f=0;f<u.length;f++){var l=u[f],d=l.ids.map(function(e){return e.id}).indexOf(s);(d===a-1||!c&&-1!==d)&&(c=l)}if(!c)return(e=new Error("invalid rev tree")).docId=_,g(e);var p,n=c.ids.map(function(e){return e.id}).indexOf(o._rev.split("-")[1])+1,e=c.ids.length-n;c.ids.splice(n,e),c.ids.reverse(),m.revs&&(o._revisions={start:c.pos+c.ids.length-1,ids:c.ids.map(function(e){return e.id})}),m.revs_info&&(p=c.pos+c.ids.length,o._revs_info=c.ids.map(function(e){return{rev:--p+"-"+e.id,status:e.opts.status}}))}if(m.attachments&&o._attachments){var h=o._attachments,v=Object.keys(h).length;if(0===v)return g(null,o);Object.keys(h).forEach(function(r){this._getAttachment(o._id,r,h[r],{rev:o._rev,binary:m.binary,ctx:i},function(e,t){var n=o._attachments[r];n.data=t,delete n.stub,delete n.length,--v||g(null,o)})},b)}else{if(o._attachments)for(var y in o._attachments)o._attachments.hasOwnProperty(y)&&(o._attachments[y].stub=!0);g(null,o)}});if("all"===m.open_revs)this._getRevisionTree(_,function(e,t){return e?g(e):(n=w.collectLeaves(t).map(function(e){return e.rev}),void r())});else{if(!Array.isArray(m.open_revs))return g(u.createError(u.UNKNOWN_ERROR,"function_clause"));for(var n=m.open_revs,e=0;e<n.length;e++){var t=n[e];if("string"!=typeof t||!/^\\d+-/.test(t))return g(u.createError(u.INVALID_REV))}r()}}),y.prototype.getAttachment=c.adapterFun("getAttachment",function(n,r,o,i){var a=this;o instanceof Function&&(i=o,o={}),this._get(n,o,function(e,t){return e?i(e):t.doc._attachments&&t.doc._attachments[r]?(o.ctx=t.ctx,o.binary=!0,void a._getAttachment(n,r,t.doc._attachments[r],o,i)):i(u.createError(u.MISSING_DOC))})}),y.prototype.allDocs=c.adapterFun("allDocs",function(t,e){if("function"==typeof t&&(e=t,t={}),t.skip=void 0!==t.skip?t.skip:0,t.start_key&&(t.startkey=t.start_key),t.end_key&&(t.endkey=t.end_key),"keys"in t){if(!Array.isArray(t.keys))return e(new TypeError("options.keys must be an array"));var n=["startkey","endkey","key"].filter(function(e){return e in t})[0];if(n)return void e(u.createError(u.QUERY_PARSE_ERROR,"Query parameter `"+n+"` is not compatible with multi-get"));if(!c.isRemote(this)&&(n="limit"in(r=t)?r.keys.slice(r.skip,r.limit+r.skip):0<r.skip?r.keys.slice(r.skip):r.keys,r.keys=n,r.skip=0,delete r.limit,r.descending&&(n.reverse(),r.descending=!1),0===t.keys.length))return this._allDocs({limit:0},e)}var r;return this._allDocs(t,e)}),y.prototype.changes=function(e,t){return"function"==typeof e&&(t=e,e={}),(e=e||{}).return_docs="return_docs"in e?e.return_docs:!e.live,new l(this,e,t)},y.prototype.close=c.adapterFun("close",function(e){return this._closed=!0,this.emit("closed"),this._close(e)}),y.prototype.info=c.adapterFun("info",function(n){var r=this;this._info(function(e,t){return e?n(e):(t.db_name=t.db_name||r.name,t.auto_compaction=!(!r.auto_compaction||c.isRemote(r)),t.adapter=r.adapter,void n(null,t))})}),y.prototype.id=c.adapterFun("id",function(e){return this._id(e)}),y.prototype.type=function(){return"function"==typeof this._type?this._type():this.adapter},y.prototype.bulkDocs=c.adapterFun("bulkDocs",function(e,o,i){if("function"==typeof o&&(i=o,o={}),o=o||{},!(e=Array.isArray(e)?{docs:e}:e)||!e.docs||!Array.isArray(e.docs))return i(u.createError(u.MISSING_BULK_DOCS));for(var r,t=0;t<e.docs.length;++t)if("object"!=typeof e.docs[t]||Array.isArray(e.docs[t]))return i(u.createError(u.NOT_AN_OBJECT));if(e.docs.forEach(function(n){n._attachments&&Object.keys(n._attachments).forEach(function(e){var t;r=r||"_"===(t=e).charAt(0)&&t+" is not a valid attachment name, attachment names cannot start with \'_\'",n._attachments[e].content_type||c.guardedConsole("warn","Attachment",e,"on document",n._id,"is missing content_type")})}),r)return i(u.createError(u.BAD_REQUEST,r));"new_edits"in o||("new_edits"in e?o.new_edits=e.new_edits:o.new_edits=!0);var a=this;o.new_edits||c.isRemote(a)||e.docs.sort(v),function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n._deleted)delete n._attachments;else if(n._attachments)for(var r=Object.keys(n._attachments),o=0;o<r.length;o++){var i=r[o];n._attachments[i]=c.pick(n._attachments[i],["data","digest","content_type","length","revpos","stub"])}}}(e.docs);var s=e.docs.map(function(e){return e._id});return this._bulkDocs(e,o,function(e,t){if(e)return i(e);if(o.new_edits||(t=t.filter(function(e){return e.error})),!c.isRemote(a))for(var n=0,r=t.length;n<r;n++)t[n].id=t[n].id||s[n];i(null,t)})}),y.prototype.registerDependentDatabase=c.adapterFun("registerDependentDatabase",function(t,e){var n=new this.constructor(t,this.__opts);c.upsert(this,"_local/_pouch_dependentDbs",function(e){return e.dependentDbs=e.dependentDbs||{},!e.dependentDbs[t]&&(e.dependentDbs[t]=!0,e)}).then(function(){e(null,{db:n})}).catch(e)}),y.prototype.destroy=c.adapterFun("destroy",function(e,r){"function"==typeof e&&(r=e,e={});var o=this,i=!("use_prefix"in o)||o.use_prefix;function a(){o._destroy(e,function(e,t){return e?r(e):(o._destroyed=!0,o.emit("destroyed"),void r(null,t||{ok:!0}))})}if(c.isRemote(o))return a();o.get("_local/_pouch_dependentDbs",function(e,t){if(e)return 404!==e.status?r(e):a();var t=t.dependentDbs,n=o.constructor,t=Object.keys(t).map(function(e){e=i?e.replace(new RegExp("^"+n.prefix),""):e;return new n(e,o.__opts).destroy()});Promise.all(t).then(a,r)})}),_.prototype.execute=function(){var e;if(this.failed)for(;e=this.queue.shift();)e(this.failed);else for(;e=this.queue.shift();)e()},_.prototype.fail=function(e){this.failed=e,this.execute()},_.prototype.ready=function(e){this.isReady=!0,this.db=e,this.execute()},_.prototype.addTask=function(e){this.queue.push(e),this.failed&&this.execute()},o(m,y),m.adapters={},m.preferredAdapters=[],m.prefix="_pouch_";var g=new s;!function(t){Object.keys(s.prototype).forEach(function(e){"function"==typeof s.prototype[e]&&(t[e]=g[e].bind(g))});var r=t._destructionListeners=new i.Map;t.on("ref",function(e){r.has(e.name)||r.set(e.name,[]),r.get(e.name).push(e)}),t.on("unref",function(e){var t,n;r.has(e.name)&&((n=(t=r.get(e.name)).indexOf(e))<0||(t.splice(n,1),1<t.length?r.set(e.name,t):r.delete(e.name)))}),t.on("destroyed",function(e){var t;r.has(e)&&(t=r.get(e),r.delete(e),t.forEach(function(e){e.emit("destroyed",!0)}))})}(m),m.adapter=function(e,t,n){t.valid()&&(m.adapters[e]=t,n&&m.preferredAdapters.push(e))},m.plugin=function(t){if("function"==typeof t)t(m);else{if("object"!=typeof t||0===Object.keys(t).length)throw new Error(\'Invalid plugin: got "\'+t+\'", expected an object or a function\');Object.keys(t).forEach(function(e){m.prototype[e]=t[e]})}return this.__defaults&&(m.__defaults=c.assign({},this.__defaults)),m},m.defaults=function(e){function n(e,t){if(!(this instanceof n))return new n(e,t);t=t||{},e&&"object"==typeof e&&(e=(t=e).name,delete t.name),t=c.assign({},n.__defaults,t),m.call(this,e,t)}return o(n,m),n.preferredAdapters=m.preferredAdapters.slice(),Object.keys(m).forEach(function(e){e in n||(n[e]=m[e])}),n.__defaults=c.assign({},this.__defaults,e),n},m.fetch=function(e,t){return f.fetch(e,t)};m.plugin(e),m.version="7.2.2",t.exports=m},{53:53,6:6,8:8,81:81,82:82,84:84,9:9,96:96,97:97}],75:[function(e,t,n){arguments[4][11][0].apply(n,arguments)},{11:11,7:7,76:76,77:77,78:78,79:79,80:80}],76:[function(e,t,n){arguments[4][12][0].apply(n,arguments)},{12:12}],77:[function(e,t,n){arguments[4][13][0].apply(n,arguments)},{13:13}],78:[function(e,t,n){arguments[4][14][0].apply(n,arguments)},{14:14}],79:[function(e,t,n){arguments[4][15][0].apply(n,arguments)},{15:15}],80:[function(e,t,n){arguments[4][16][0].apply(n,arguments)},{16:16}],81:[function(e,t,n){arguments[4][17][0].apply(n,arguments)},{17:17}],82:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="undefined"!=typeof AbortController?AbortController:function(){return{abort:function(){}}},o=fetch,i=Headers;n.fetch=o,n.Headers=i,n.AbortController=r},{}],83:[function(e,t,n){arguments[4][18][0].apply(n,arguments)},{18:18,52:52,85:85}],84:[function(e,t,n){arguments[4][19][0].apply(n,arguments)},{19:19,6:6,75:75,8:8,81:81,83:83,87:87,9:9,96:96}],85:[function(e,t,n){arguments[4][20][0].apply(n,arguments)},{20:20}],86:[function(e,t,n){arguments[4][21][0].apply(n,arguments)},{21:21}],87:[function(e,t,n){arguments[4][22][0].apply(n,arguments)},{22:22,91:91,92:92,94:94,95:95}],88:[function(e,t,n){arguments[4][23][0].apply(n,arguments)},{23:23}],89:[function(e,t,n){arguments[4][24][0].apply(n,arguments)},{24:24}],90:[function(e,t,n){arguments[4][25][0].apply(n,arguments)},{25:25}],91:[function(e,t,n){arguments[4][26][0].apply(n,arguments)},{26:26,86:86,89:89}],92:[function(e,t,n){arguments[4][27][0].apply(n,arguments)},{27:27,88:88,93:93}],93:[function(e,t,n){arguments[4][28][0].apply(n,arguments)},{28:28,86:86}],94:[function(e,t,n){arguments[4][29][0].apply(n,arguments)},{29:29,86:86,89:89}],95:[function(e,t,n){arguments[4][30][0].apply(n,arguments)},{30:30,90:90,93:93}],96:[function(e,t,n){"use strict";function r(e,t,n){Error.call(this,n),this.status=e,this.name=t,this.message=n,this.error=!0}Object.defineProperty(n,"__esModule",{value:!0}),((k=e(9))&&"object"==typeof k&&"default"in k?k.default:k)(r,Error),r.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};var o=new r(401,"unauthorized","Name or password is incorrect."),i=new r(400,"bad_request","Missing JSON list of \'docs\'"),a=new r(404,"not_found","missing"),s=new r(409,"conflict","Document update conflict"),u=new r(400,"bad_request","_id field must contain a string"),c=new r(412,"missing_id","_id is required for puts"),f=new r(400,"bad_request","Only reserved document ids may start with underscore."),l=new r(412,"precondition_failed","Database not open"),d=new r(500,"unknown_error","Database encountered an unknown error"),p=new r(500,"badarg","Some query argument is invalid"),h=new r(400,"invalid_request","Request was invalid"),v=new r(400,"query_parse_error","Some query parameter is invalid"),y=new r(500,"doc_validation","Bad special document member"),_=new r(400,"bad_request","Something wrong with the request"),m=new r(400,"bad_request","Document must be a JSON object"),g=new r(404,"not_found","Database not found"),b=new r(500,"indexed_db_went_bad","unknown"),w=new r(500,"web_sql_went_bad","unknown"),E=new r(500,"levelDB_went_went_bad","unknown"),A=new r(403,"forbidden","Forbidden by design doc validate_doc_update function"),O=new r(400,"bad_request","Invalid rev format"),I=new r(412,"file_exists","The database could not be created, the file already exists."),e=new r(412,"missing_stub","A pre-existing attachment stub wasn\'t found"),k=new r(413,"invalid_url","Provided URL is invalid");n.UNAUTHORIZED=o,n.MISSING_BULK_DOCS=i,n.MISSING_DOC=a,n.REV_CONFLICT=s,n.INVALID_ID=u,n.MISSING_ID=c,n.RESERVED_ID=f,n.NOT_OPEN=l,n.UNKNOWN_ERROR=d,n.BAD_ARG=p,n.INVALID_REQUEST=h,n.QUERY_PARSE_ERROR=v,n.DOC_VALIDATION=y,n.BAD_REQUEST=_,n.NOT_AN_OBJECT=m,n.DB_MISSING=g,n.WSQ_ERROR=w,n.LDB_ERROR=E,n.FORBIDDEN=A,n.INVALID_REV=O,n.FILE_EXISTS=I,n.MISSING_STUB=e,n.IDB_ERROR=b,n.INVALID_URL=k,n.createError=function(o,e){function t(e){for(var t=Object.getOwnPropertyNames(o),n=0,r=t.length;n<r;n++)"function"!=typeof o[t[n]]&&(this[t[n]]=o[t[n]]);void 0!==e&&(this.reason=e)}return t.prototype=r.prototype,new t(e)},n.generateErrorFromResponse=function(e){var t;return"object"!=typeof e&&(t=e,(e=d).data=t),"error"in e&&"conflict"===e.error&&(e.name="conflict",e.status=409),"name"in e||(e.name=e.error||"unknown"),"status"in e||(e.status=500),"message"in e||(e.message=e.message||e.reason),e}},{9:9}],97:[function(e,t,n){"use strict";function s(e){for(var t,n,r,o=e.rev_tree.slice();f=o.pop();){var i=f.ids,a=i[2],s=f.pos;if(a.length)for(var u=0,c=a.length;u<c;u++)o.push({pos:s+1,ids:a[u]});else{var f=!!i[1].deleted,i=i[0];t&&!(r!==f?r:n!==s?n<s:t<i)||(t=i,n=s,r=f)}}return n+"-"+t}function p(e,t){for(var n,r=e.slice();n=r.pop();)for(var o=n.pos,i=n.ids,a=i[2],s=t(0===a.length,o,i[0],n.ctx,i[1]),u=0,c=a.length;u<c;u++)r.push({pos:o+1,ids:a[u],ctx:s})}function r(e,t){return e.pos-t.pos}function u(e){var i=[];p(e,function(e,t,n,r,o){e&&i.push({rev:t+"-"+n,pos:t,opts:o})}),i.sort(r).reverse();for(var t=0,n=i.length;t<n;t++)delete i[t].pos;return i}function h(e){for(var t,n=[],r=e.slice();t=r.pop();){var o=t.pos,i=t.ids,a=i[0],s=i[1],u=i[2],i=0===u.length,c=t.history?t.history.slice():[];c.push({id:a,opts:s}),i&&n.push({pos:o+1-c.length,ids:c});for(var f=0,l=u.length;f<l;f++)r.push({pos:o+1,ids:u[f],history:c})}return n.reverse()}function g(e,t){return e.pos-t.pos}function f(e,t,n){n=function(e,t,n){for(var r,o=0,i=e.length;o<i;)n(e[r=o+i>>>1],t)<0?o=1+r:i=r;return o}(e,t,n);e.splice(n,0,t)}function v(e,t){for(var n,r,o=t,i=e.length;o<i;o++){var a=e[o],a=[a.id,a.opts,[]];r?(r[2].push(a),r=a):n=r=a}return n}function l(e,t){return e[0]<t[0]?-1:1}function b(e,t){for(var n=[{tree1:e,tree2:t}],r=!1;0<n.length;){var o=n.pop(),i=o.tree1,a=o.tree2;(i[1].status||a[1].status)&&(i[1].status="available"===i[1].status||"available"===a[1].status?"available":"missing");for(var s=0;s<a[2].length;s++)if(i[2][0]){for(var u=!1,c=0;c<i[2].length;c++)i[2][c][0]===a[2][s][0]&&(n.push({tree1:i[2][c],tree2:a[2][s]}),u=!0);u||(r="new_branch",f(i[2],a[2][s],l))}else r="new_leaf",i[2][0]=a[2][s]}return{conflicts:r,tree:e}}function y(e,t,n){var r,o=[],i=!1,a=!1;if(!e.length)return{tree:[t],conflicts:"new_leaf"};for(var s=0,u=e.length;s<u;s++){var c=e[s];if(c.pos===t.pos&&c.ids[0]===t.ids[0])r=b(c.ids,t.ids),o.push({pos:c.pos,ids:r.tree}),i=i||r.conflicts,a=!0;else if(!0!==n){var f=c.pos<t.pos?c:t,l=c.pos<t.pos?t:c,d=l.pos-f.pos,p=[],h=[];for(h.push({ids:f.ids,diff:d,parent:null,parentIdx:null});0<h.length;){var v=h.pop();if(0!==v.diff)for(var y=v.ids[2],_=0,m=y.length;_<m;_++)h.push({ids:y[_],diff:v.diff-1,parent:v.ids,parentIdx:_});else v.ids[0]===l.ids[0]&&p.push(v)}d=p[0];d?(r=b(d.ids,l.ids),d.parent[2][d.parentIdx]=r.tree,o.push({pos:f.pos,ids:f.ids}),i=i||r.conflicts,a=!0):o.push(c)}else o.push(c)}return a||o.push(t),o.sort(g),{tree:o,conflicts:i||"internal_node"}}function i(e){return e.ids}Object.defineProperty(n,"__esModule",{value:!0}),n.collectConflicts=function(e){for(var t=s(e),n=u(e.rev_tree),r=[],o=0,i=n.length;o<i;o++){var a=n[o];a.rev===t||a.opts.deleted||r.push(a.rev)}return r},n.collectLeaves=u,n.compactTree=function(e){var i=[];return p(e.rev_tree,function(e,t,n,r,o){"available"!==o.status||e||(i.push(t+"-"+n),o.status="missing")}),i},n.isDeleted=function(e,t){for(var n,r=(t=t||s(e)).substring(t.indexOf("-")+1),o=e.rev_tree.map(i);n=o.pop();){if(n[0]===r)return!!n[1].deleted;o=o.concat(n[2])}},n.isLocalId=function(e){return/^_local/.test(e)},n.merge=function(e,t,n){return t=y(e,t),{tree:(n=function(e,t){for(var n,r=h(e),o=0,i=r.length;o<i;o++){var a=r[o],s=a.ids;if(s.length>t)for(var u=u||{},c=s.length-t,f={pos:a.pos+c,ids:v(s,c)},l=0;l<c;l++){var d=a.pos+l+"-"+s[l].id;u[d]=!0}else f={pos:a.pos,ids:v(s,0)};n=n?y(n,f,!0).tree:[f]}return u&&p(n,function(e,t,n){delete u[t+"-"+n]}),{tree:n,revs:u?Object.keys(u):[]}}(t.tree,n)).tree,stemmedRevs:n.revs,conflicts:t.conflicts}},n.revExists=function(e,t){for(var n,r=e.slice(),t=t.split("-"),o=parseInt(t[0],10),i=t[1];n=r.pop();){if(n.pos===o&&n.ids[0]===i)return!0;for(var a=n.ids[2],s=0,u=a.length;s<u;s++)r.push({pos:n.pos+1,ids:a[s]})}return!1},n.rootToLeaf=h,n.traverseRevTree=p,n.winningRev=s,n.latest=function(e,t){for(var n,r=t.rev_tree.slice();n=r.pop();){var o=n.pos,i=n.ids,a=i[0],s=i[1],u=i[2],i=0===u.length,c=n.history?n.history.slice():[];if(c.push({id:a,pos:o,opts:s}),i)for(var f=0,l=c.length;f<l;f++){var d=c[f];if(d.pos+"-"+d.id===e)return o+"-"+a}for(var p=0,h=u.length;p<h;p++)r.push({pos:o+1,ids:u[p],history:c})}throw new Error("Unable to resolve latest revision for id "+t.id+", rev "+e)}},{}],98:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var s=e(108),i=e(105);function u(e,t){for(var n=e,r=0,o=t.length;r<o;r++)if(!(n=n[t[r]]))break;return n}function a(e,t){return e<t?-1:t<e?1:0}function c(e){for(var t=[],n="",r=0,o=e.length;r<o;r++){var i=e[r];"."===i?n=0<r&&"\\\\"===e[r-1]?n.substring(0,n.length-1)+".":(t.push(n),""):n+=i}return t.push(n),t}var r=["$or","$nor","$not"];function f(e){return-1<r.indexOf(e)}function l(e){return Object.keys(e)[0]}function d(e){return e[l(e)]}function p(e){var n={};return e.forEach(function(t){Object.keys(t).forEach(function(e){var s,u=t[e];"object"!=typeof u&&(u={$eq:u}),f(e)?u instanceof Array?n[e]=u.map(function(e){return p([e])}):n[e]=p([u]):(s=n[e]=n[e]||{},Object.keys(u).forEach(function(e){var t,n,r,o,i,a=u[e];return"$gt"===e||"$gte"===e?(r=e,o=a,void(void 0===(i=s).$eq&&(void 0!==i.$gte?"$gte"===r?o>i.$gte&&(i.$gte=o):o>=i.$gte&&(delete i.$gte,i.$gt=o):void 0!==i.$gt?"$gte"===r?o>i.$gt&&(delete i.$gt,i.$gte=o):o>i.$gt&&(i.$gt=o):i[r]=o))):"$lt"===e||"$lte"===e?(i=e,r=a,void(void 0===(o=s).$eq&&(void 0!==o.$lte?"$lte"===i?r<o.$lte&&(o.$lte=r):r<=o.$lte&&(delete o.$lte,o.$lt=r):void 0!==o.$lt?"$lte"===i?r<o.$lt&&(delete o.$lt,o.$lte=r):r<o.$lt&&(o.$lt=r):o[i]=r))):"$ne"===e?(t=a,void("$ne"in(n=s)?n.$ne.push(t):n.$ne=[t])):"$eq"===e?(n=a,delete(t=s).$gt,delete t.$gte,delete t.$lt,delete t.$lte,delete t.$ne,void(t.$eq=n)):void(s[e]=a)}))})}),n}function o(e){var t=s.clone(e),n=!1;!function e(t,n){for(var r in t)"$and"===r&&(n=!0),"object"==typeof(r=t[r])&&(n=e(r,n));return n}(t,!1)||("$and"in(t=function e(t){for(var n in t){if(Array.isArray(t))for(var r in t)t[r].$and&&(t[r]=p(t[r].$and));"object"==typeof(n=t[n])&&e(n)}return t}(t))&&(t=p(t.$and)),n=!0),["$or","$nor"].forEach(function(e){e in t&&t[e].forEach(function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var r=t[n],o=e[r];"object"==typeof o&&null!==o||(e[r]={$eq:o})}})}),"$not"in t&&(t.$not=p([t.$not]));for(var r=Object.keys(t),o=0;o<r.length;o++){var i=r[o],a=t[i];"object"!=typeof a||null===a?a={$eq:a}:"$ne"in a&&!n&&(a.$ne=[a.$ne]),t[i]=a}return t}function h(e){function o(t){return e.map(function(e){e=c(l(e));return u(t,e)})}return function(e,t){var n=o(e.doc),r=o(t.doc),r=i.collate(n,r);return 0!==r?r:a(e.doc._id,t.doc._id)}}function v(e,t,n){var r,o;return e=e.filter(function(e){return y(e.doc,t.selector,n)}),t.sort&&(o=h(t.sort),e=e.sort(o),"string"!=typeof t.sort[0]&&"desc"===d(t.sort[0])&&(e=e.reverse())),("limit"in t||"skip"in t)&&(r=t.skip||0,o=("limit"in t?t.limit:e.length)+r,e=e.slice(r,o)),e}function y(a,s,e){return e.every(function(e){var t,n,r=s[e],o=c(e),i=u(a,o);return f(e)?(t=r,n=a,"$or"!==(e=e)?"$not"!==e?!t.find(function(e){return y(n,e,Object.keys(e))}):!y(n,t,Object.keys(t)):t.some(function(e){return y(n,e,Object.keys(e))})):_(r,a,o,i)})}function _(n,r,o,i){return!n||("object"==typeof n?Object.keys(n).every(function(e){var t=n[e];return function(e,t,n,r,o){if(w[e])return w[e](t,n,r,o);throw new Error(\'unknown operator "\'+e+\'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all\')}(e,r,t,o,i)}):n===i)}function m(e){return null!=e}function g(e){return void 0!==e}function b(t,e){return e.some(function(e){return t instanceof Array?-1<t.indexOf(e):t===e})}var w={$elemMatch:function(t,n,r,e){return!!Array.isArray(e)&&(0!==e.length&&("object"==typeof e[0]?e.some(function(e){return y(e,n,Object.keys(n))}):e.some(function(e){return _(n,t,r,e)})))},$allMatch:function(t,n,r,e){return!!Array.isArray(e)&&(0!==e.length&&("object"==typeof e[0]?e.every(function(e){return y(e,n,Object.keys(n))}):e.every(function(e){return _(n,t,r,e)})))},$eq:function(e,t,n,r){return g(r)&&0===i.collate(r,t)},$gte:function(e,t,n,r){return g(r)&&0<=i.collate(r,t)},$gt:function(e,t,n,r){return g(r)&&0<i.collate(r,t)},$lte:function(e,t,n,r){return g(r)&&i.collate(r,t)<=0},$lt:function(e,t,n,r){return g(r)&&i.collate(r,t)<0},$exists:function(e,t,n,r){return t?g(r):!g(r)},$mod:function(e,t,n,r){return m(r)&&function(e,t){var n=t[0],t=t[1];if(0===n)throw new Error("Bad divisor, cannot divide by zero");if(parseInt(n,10)!==n)throw new Error("Divisor is not an integer");if(parseInt(t,10)!==t)throw new Error("Modulus is not an integer");return parseInt(e,10)===e&&e%n===t}(r,t)},$ne:function(e,t,n,r){return t.every(function(e){return 0!==i.collate(r,e)})},$in:function(e,t,n,r){return m(r)&&b(r,t)},$nin:function(e,t,n,r){return m(r)&&!b(r,t)},$size:function(e,t,n,r){return m(r)&&r.length===t},$all:function(e,t,n,r){return Array.isArray(r)&&(o=r,t.every(function(e){return-1<o.indexOf(e)}));var o},$regex:function(e,t,n,r){return m(r)&&(r=r,new RegExp(t).test(r))},$type:function(e,t,n,r){return function(e,t){switch(t){case"null":return null===e;case"boolean":return"boolean"==typeof e;case"number":return"number"==typeof e;case"string":return"string"==typeof e;case"array":return e instanceof Array;case"object":return"[object Object]"==={}.toString.call(e)}throw new Error(t+" not supported as a type.Please use one of object, string, array, number, boolean or null.")}(r,t)}};n.massageSelector=o,n.matchesSelector=function(e,t){if("object"!=typeof t)throw new Error("Selector error: expected a JSON object");return(t=v([{doc:e}],{selector:t=o(t)},Object.keys(t)))&&1===t.length},n.filterInMemoryFields=v,n.createFieldSorter=h,n.rowFilter=y,n.isCombinationalField=f,n.getKey=l,n.getValue=d,n.getFieldFromDoc=u,n.setFieldInDoc=function(e,t,n){for(var r=0,o=t.length;r<o-1;r++){var i=t[r];e=e[i]=e[i]||{}}e[t[o-1]]=n},n.compare=a,n.parseField=c},{105:105,108:108}],99:[function(e,t,n){arguments[4][11][0].apply(n,arguments)},{100:100,101:101,102:102,103:103,104:104,11:11,7:7}],100:[function(e,t,n){arguments[4][12][0].apply(n,arguments)},{12:12}],101:[function(e,t,n){arguments[4][13][0].apply(n,arguments)},{13:13}],102:[function(e,t,n){arguments[4][14][0].apply(n,arguments)},{14:14}],103:[function(e,t,n){arguments[4][15][0].apply(n,arguments)},{15:15}],104:[function(e,t,n){arguments[4][16][0].apply(n,arguments)},{16:16}],105:[function(e,t,n){"use strict";function s(e,t,n){return function(e,t,n){for(var r="",o=n-e.length;r.length<o;)r+=t;return r}(e,t,n)+e}Object.defineProperty(n,"__esModule",{value:!0});var p=-324,h=3,u="";function c(e,t){if(e===t)return 0;e=a(e),t=a(t);var n,r,o=l(e),i=l(t);if(o-i!=0)return o-i;switch(typeof e){case"number":return e-t;case"boolean":return e<t?-1:1;case"string":return(n=e)===(r=t)?0:r<n?1:-1}return(Array.isArray(e)?function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var o=c(e[r],t[r]);if(0!==o)return o}return e.length===t.length?0:e.length>t.length?1:-1}:function(e,t){for(var n=Object.keys(e),r=Object.keys(t),o=Math.min(n.length,r.length),i=0;i<o;i++){var a=c(n[i],r[i]);if(0!==a)return a;if(0!==(a=c(e[n[i]],t[r[i]])))return a}return n.length===r.length?0:n.length>r.length?1:-1})(e,t)}function a(e){switch(typeof e){case"undefined":return null;case"number":return e===1/0||e===-1/0||isNaN(e)?null:e;case"object":var t,n=e;if(Array.isArray(e)){var r=e.length;e=new Array(r);for(var o=0;o<r;o++)e[o]=a(n[o])}else{if(e instanceof Date)return e.toJSON();if(null!==e)for(var i in e={},n)!n.hasOwnProperty(i)||void 0!==(t=n[i])&&(e[i]=a(t))}}return e}function r(e){if(null!==e)switch(typeof e){case"boolean":return e?1:0;case"number":return function(e){if(0===e)return"1";var t=e.toExponential().split(/e\\+?/),n=parseInt(t[1],10),r=e<0,e=r?"0":"2",n=s(((r?-n:n)-p).toString(),"0",h);e+=u+n;t=Math.abs(parseFloat(t[0]));r&&(t=10-t);t=t.toFixed(20);return t=t.replace(/\\.?0+$/,""),e+=u+t}(e);case"string":return e.replace(/\\u0002/g,"").replace(/\\u0001/g,"").replace(/\\u0000/g,"");case"object":var t=Array.isArray(e),n=t?e:Object.keys(e),r=-1,o=n.length,i="";if(t)for(;++r<o;)i+=f(n[r]);else for(;++r<o;){var a=n[r];i+=f(a)+f(e[a])}return i}return""}function f(e){return l(e=a(e))+u+r(e)+"\\0"}function l(e){var t=["boolean","number","string","object"].indexOf(typeof e);return~t?null===e?1:Array.isArray(e)?5:t<3?t+2:t+3:Array.isArray(e)?5:void 0}n.collate=c,n.normalizeKey=a,n.toIndexableString=f,n.parseIndexableString=function(e){for(var t,n,r,o,i=[],a=[],s=0;;){var u=e[s++];if("\\0"!==u)switch(u){case"1":i.push(null);break;case"2":i.push("1"===e[s]),s++;break;case"3":var c=function(e,t){var n,r=t;if("1"===e[t])n=0,t++;else{var o="0"===e[t],i="",a=e.substring(++t,t+h),a=parseInt(a,10)+p;for(o&&(a=-a),t+=h;;){var s=e[t];if("\\0"===s)break;i+=s,t++}n=1===(i=i.split(".")).length?parseInt(i,10):parseFloat(i[0]+"."+i[1]),o&&(n-=10),0!==a&&(n=parseFloat(n+"e"+a))}return{num:n,length:t-r}}(e,s);i.push(c.num),s+=c.length;break;case"4":for(var f="";;){var l=e[s];if("\\0"===l)break;f+=l,s++}f=f.replace(/\\u0001\\u0001/g,"\\0").replace(/\\u0001\\u0002/g,"").replace(/\\u0002\\u0002/g,""),i.push(f);break;case"5":var d={element:[],index:i.length};i.push(d.element),a.push(d);break;case"6":d={element:{},index:i.length};i.push(d.element),a.push(d);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+u)}else{if(1===i.length)return i.pop();n=a,o=r=void 0,o=(t=i).pop(),n.length&&(o===(r=n[n.length-1]).element&&(n.pop(),r=n[n.length-1]),n=r.element,r=r.index,Array.isArray(n)?n.push(o):r===t.length-2?n[t.pop()]=o:t.push(o))}}}},{}],106:[function(e,t,n){arguments[4][17][0].apply(n,arguments)},{17:17}],107:[function(e,t,n){arguments[4][18][0].apply(n,arguments)},{109:109,18:18,52:52}],108:[function(e,t,n){arguments[4][19][0].apply(n,arguments)},{106:106,107:107,111:111,19:19,6:6,8:8,9:9,96:96,99:99}],109:[function(e,t,n){arguments[4][20][0].apply(n,arguments)},{20:20}],110:[function(e,t,n){arguments[4][21][0].apply(n,arguments)},{21:21}],111:[function(e,t,n){arguments[4][22][0].apply(n,arguments)},{115:115,116:116,118:118,119:119,22:22}],112:[function(e,t,n){arguments[4][23][0].apply(n,arguments)},{23:23}],113:[function(e,t,n){arguments[4][24][0].apply(n,arguments)},{24:24}],114:[function(e,t,n){arguments[4][25][0].apply(n,arguments)},{25:25}],115:[function(e,t,n){arguments[4][26][0].apply(n,arguments)},{110:110,113:113,26:26}],116:[function(e,t,n){arguments[4][27][0].apply(n,arguments)},{112:112,117:117,27:27}],117:[function(e,t,n){arguments[4][28][0].apply(n,arguments)},{110:110,28:28}],118:[function(e,t,n){arguments[4][29][0].apply(n,arguments)},{110:110,113:113,29:29}],119:[function(e,t,n){arguments[4][30][0].apply(n,arguments)},{114:114,117:117,30:30}]},{},[3]);'},{}],11:[function(e,t,n){"use strict";t.exports=function(r){return function(){var e=arguments.length;if(e){for(var t=[],n=-1;++n<e;)t[n]=arguments[n];return r.call(this,t)}return r.call(this,[])}}},{}],12:[function(e,t,n){var a=Object.create||function(e){function t(){}return t.prototype=e,new t},s=Object.keys||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return t},r=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function o(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=a(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}((t.exports=o).EventEmitter=o).prototype._events=void 0,o.prototype._maxListeners=void 0;var i,u=10;try{var c={};Object.defineProperty&&Object.defineProperty(c,"x",{value:0}),i=0===c.x}catch(e){i=!1}function f(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var o,i;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');return(o=e._events)?(o.newListener&&(e.emit("newListener",t,n.listener||n),o=e._events),i=o[t]):(o=e._events=a(null),e._eventsCount=0),i?("function"==typeof i?i=o[t]=r?[n,i]:[i,n]:r?i.unshift(n):i.push(n),i.warned||(r=f(e))&&0<r&&i.length>r&&(i.warned=!0,(r=new Error("Possible EventEmitter memory leak detected. "+i.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.')).name="MaxListenersExceededWarning",r.emitter=e,r.type=t,r.count=i.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",r.name,r.message))):(i=o[t]=n,++e._eventsCount),e}function d(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function p(e,t,n){e={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},t=r.call(d,e);return t.listener=n,e.wrapFn=t}function h(e,t,n){e=e._events;if(!e)return[];t=e[t];return t?"function"==typeof t?n?[t.listener||t]:[t]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):y(t,t.length):[]}function v(e){var t=this._events;if(t){e=t[e];if("function"==typeof e)return 1;if(e)return e.length}return 0}function y(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}i?Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');u=e}}):o.defaultMaxListeners=u,o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return f(this)},o.prototype.emit=function(e){var t,n,r,o,i="error"===e,s=this._events;if(s)i=i&&null==s.error;else if(!i)return!1;if(i){if((t=1<arguments.length?arguments[1]:t)instanceof Error)throw t;i=new Error('Unhandled "error" event. ('+t+")");throw i.context=t,i}if(!(n=s[e]))return!1;var a,u="function"==typeof n;switch(a=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var r=e.length,o=y(e,r),i=0;i<r;++i)o[i].call(n)}(n,u,this);break;case 2:!function(e,t,n,r){if(t)e.call(n,r);else for(var o=e.length,i=y(e,o),s=0;s<o;++s)i[s].call(n,r)}(n,u,this,arguments[1]);break;case 3:!function(e,t,n,r,o){if(t)e.call(n,r,o);else for(var i=e.length,s=y(e,i),a=0;a<i;++a)s[a].call(n,r,o)}(n,u,this,arguments[1],arguments[2]);break;case 4:!function(e,t,n,r,o,i){if(t)e.call(n,r,o,i);else for(var s=e.length,a=y(e,s),u=0;u<s;++u)a[u].call(n,r,o,i)}(n,u,this,arguments[1],arguments[2],arguments[3]);break;default:for(r=new Array(a-1),o=1;o<a;o++)r[o-1]=arguments[o];!function(e,t,n,r){if(t)e.apply(n,r);else for(var o=e.length,i=y(e,o),s=0;s<o;++s)i[s].apply(n,r)}(n,u,this,r)}return!0},o.prototype.on=o.prototype.addListener=function(e,t){return l(this,e,t,!1)},o.prototype.prependListener=function(e,t){return l(this,e,t,!0)},o.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,p(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,p(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,o,i,s;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=a(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length-1;0<=i;i--)if(n[i]===t||n[i].listener===t){s=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(e,t){for(var n=t,r=n+1,o=e.length;r<o;n+=1,r+=1)e[n]=e[r];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),r.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.removeAllListeners=function(e){var t,n=this._events;if(!n)return this;if(!n.removeListener)return 0===arguments.length?(this._events=a(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=a(null):delete n[e]),this;if(0===arguments.length){for(var r,o=s(n),i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=a(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(i=t.length-1;0<=i;i--)this.removeListener(e,t[i]);return this},o.prototype.listeners=function(e){return h(this,e,!0)},o.prototype.rawListeners=function(e){return h(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):v.call(e,t)},o.prototype.listenerCount=v,o.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],13:[function(e,c,t){!function(u){!function(){"use strict";var e,t,n,r,o=u.MutationObserver||u.WebKitMutationObserver,i=o?(e=0,o=new o(a),t=u.document.createTextNode(""),o.observe(t,{characterData:!0}),function(){t.data=e=++e%2}):u.setImmediate||void 0===u.MessageChannel?"document"in u&&"onreadystatechange"in u.document.createElement("script")?function(){var e=u.document.createElement("script");e.onreadystatechange=function(){a(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},u.document.documentElement.appendChild(e)}:function(){setTimeout(a,0)}:((n=new u.MessageChannel).port1.onmessage=a,function(){n.port2.postMessage(0)}),s=[];function a(){var e,t;r=!0;for(var n=s.length;n;){for(t=s,s=[],e=-1;++e<n;)t[e]();n=s.length}r=!1}c.exports=function(e){1!==s.push(e)||r||i()}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],14:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(e,t){var n;t&&(e.super_=t,(n=function(){}).prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e)}},{}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(e){return atob(e)}function o(e){return btoa(e)}function i(t,n){t=t||[],n=n||{};try{return new Blob(t,n)}catch(e){if("TypeError"!==e.name)throw e;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),o=0;o<t.length;o+=1)r.append(t[o]);return r.getBlob(n.type)}}function s(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;o<t;o++)r[o]=e.charCodeAt(o);return n}function a(e,t){return i([s(e)],{type:t})}function u(e,t){var n=new FileReader,r="function"==typeof n.readAsBinaryString;n.onloadend=function(e){e=e.target.result||"";if(r)return t(e);t(function(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,o=0;o<r;o++)t+=String.fromCharCode(n[o]);return t}(e))},r?n.readAsBinaryString(e):n.readAsArrayBuffer(e)}function c(e,t){u(e,function(e){t(e)})}n.atob=r,n.btoa=o,n.base64StringToBlobOrBuffer=function(e,t){return a(r(e),t)},n.binaryStringToArrayBuffer=s,n.binaryStringToBlobOrBuffer=a,n.blob=i,n.blobOrBufferToBase64=function(e,t){c(e,function(e){t(o(e))})},n.blobOrBufferToBinaryString=c,n.readAsArrayBuffer=function(e,t){var n=new FileReader;n.onloadend=function(e){e=e.target.result||new ArrayBuffer(0);t(e)},n.readAsArrayBuffer(e)},n.readAsBinaryString=u,n.typedBuffer=function(){}},{}],16:[function(e,t,n){"use strict";function r(){this._store={}}function o(e){if(this._store=new r,e&&Array.isArray(e))for(var t=0,n=e.length;t<n;t++)this.add(e[t])}Object.defineProperty(n,"__esModule",{value:!0}),r.prototype.get=function(e){return this._store["$"+e]},r.prototype.set=function(e,t){return this._store["$"+e]=t,!0},r.prototype.has=function(e){return"$"+e in this._store},r.prototype.delete=function(e){var t="$"+e,e=t in this._store;return delete this._store[t],e},r.prototype.forEach=function(e){for(var t=Object.keys(this._store),n=0,r=t.length;n<r;n++){var o=t[n];e(this._store[o],o=o.substring(1))}},Object.defineProperty(r.prototype,"size",{get:function(){return Object.keys(this._store).length}}),o.prototype.add=function(e){return this._store.set(e,!0)},o.prototype.has=function(e){return this._store.has(e)},o.prototype.forEach=function(n){this._store.forEach(function(e,t){n(t)})},Object.defineProperty(o.prototype,"size",{get:function(){return this._store.size}}),!function(){if("undefined"!=typeof Symbol&&"undefined"!=typeof Map&&"undefined"!=typeof Set){var e=Object.getOwnPropertyDescriptor(Map,Symbol.species);return e&&"get"in e&&Map[Symbol.species]===Map}}()?(n.Set=o,n.Map=r):(n.Set=Set,n.Map=Map)},{}],17:[function(n,e,r){!function(t){!function(){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e,d=n(18),p=(e=n(29))&&"object"==typeof e&&"default"in e?e.default:e,h=t.setImmediate||t.setTimeout;function v(t,e,n,r,o){var i;(0<n||r<e.size)&&(i=n,n=r,e=(r=e).webkitSlice?r.webkitSlice(i,n):r.slice(i,n)),d.readAsArrayBuffer(e,function(e){t.append(e),o()})}function y(e,t,n,r,o){(0<n||r<t.length)&&(t=t.substring(n,r)),e.appendBinary(t),o()}r.binaryMd5=function(n,t){var e="string"==typeof n,r=e?n.length:n.size,o=Math.min(32768,r),i=Math.ceil(r/o),s=0,a=new(e?p:p.ArrayBuffer),u=e?y:v;function c(){h(l)}function f(){var e=a.end(!0),e=d.btoa(e);t(e),a.destroy()}function l(){var e=s*o,t=e+o;u(a,n,e,t,++s<i?c:f)}l()},r.stringMd5=function(e){return p.hash(e)}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{18:18,29:29}],18:[function(e,t,n){arguments[4][15][0].apply(n,arguments)},{15:15}],19:[function(e,t,n){"use strict";function a(e){for(var t,n,r,o=e.rev_tree.slice();f=o.pop();){var i=f.ids,s=i[2],a=f.pos;if(s.length)for(var u=0,c=s.length;u<c;u++)o.push({pos:a+1,ids:s[u]});else{var f=!!i[1].deleted,i=i[0];t&&!(r!==f?r:n!==a?n<a:t<i)||(t=i,n=a,r=f)}}return n+"-"+t}function p(e,t){for(var n,r=e.slice();n=r.pop();)for(var o=n.pos,i=n.ids,s=i[2],a=t(0===s.length,o,i[0],n.ctx,i[1]),u=0,c=s.length;u<c;u++)r.push({pos:o+1,ids:s[u],ctx:a})}function r(e,t){return e.pos-t.pos}function u(e){var i=[];p(e,function(e,t,n,r,o){e&&i.push({rev:t+"-"+n,pos:t,opts:o})}),i.sort(r).reverse();for(var t=0,n=i.length;t<n;t++)delete i[t].pos;return i}function h(e){for(var t,n=[],r=e.slice();t=r.pop();){var o=t.pos,i=t.ids,s=i[0],a=i[1],u=i[2],i=0===u.length,c=t.history?t.history.slice():[];c.push({id:s,opts:a}),i&&n.push({pos:o+1-c.length,ids:c});for(var f=0,l=u.length;f<l;f++)r.push({pos:o+1,ids:u[f],history:c})}return n.reverse()}function _(e,t){return e.pos-t.pos}function f(e,t,n){n=function(e,t,n){for(var r,o=0,i=e.length;o<i;)n(e[r=o+i>>>1],t)<0?o=1+r:i=r;return o}(e,t,n);e.splice(n,0,t)}function v(e,t){for(var n,r,o=t,i=e.length;o<i;o++){var s=e[o],s=[s.id,s.opts,[]];r?(r[2].push(s),r=s):n=r=s}return n}function l(e,t){return e[0]<t[0]?-1:1}function b(e,t){for(var n=[{tree1:e,tree2:t}],r=!1;0<n.length;){var o=n.pop(),i=o.tree1,s=o.tree2;(i[1].status||s[1].status)&&(i[1].status="available"===i[1].status||"available"===s[1].status?"available":"missing");for(var a=0;a<s[2].length;a++)if(i[2][0]){for(var u=!1,c=0;c<i[2].length;c++)i[2][c][0]===s[2][a][0]&&(n.push({tree1:i[2][c],tree2:s[2][a]}),u=!0);u||(r="new_branch",f(i[2],s[2][a],l))}else r="new_leaf",i[2][0]=s[2][a]}return{conflicts:r,tree:e}}function y(e,t,n){var r,o=[],i=!1,s=!1;if(!e.length)return{tree:[t],conflicts:"new_leaf"};for(var a=0,u=e.length;a<u;a++){var c=e[a];if(c.pos===t.pos&&c.ids[0]===t.ids[0])r=b(c.ids,t.ids),o.push({pos:c.pos,ids:r.tree}),i=i||r.conflicts,s=!0;else if(!0!==n){var f=c.pos<t.pos?c:t,l=c.pos<t.pos?t:c,d=l.pos-f.pos,p=[],h=[];for(h.push({ids:f.ids,diff:d,parent:null,parentIdx:null});0<h.length;){var v=h.pop();if(0!==v.diff)for(var y=v.ids[2],m=0,g=y.length;m<g;m++)h.push({ids:y[m],diff:v.diff-1,parent:v.ids,parentIdx:m});else v.ids[0]===l.ids[0]&&p.push(v)}d=p[0];d?(r=b(d.ids,l.ids),d.parent[2][d.parentIdx]=r.tree,o.push({pos:f.pos,ids:f.ids}),i=i||r.conflicts,s=!0):o.push(c)}else o.push(c)}return s||o.push(t),o.sort(_),{tree:o,conflicts:i||"internal_node"}}function i(e){return e.ids}Object.defineProperty(n,"__esModule",{value:!0}),n.collectConflicts=function(e){for(var t=a(e),n=u(e.rev_tree),r=[],o=0,i=n.length;o<i;o++){var s=n[o];s.rev===t||s.opts.deleted||r.push(s.rev)}return r},n.collectLeaves=u,n.compactTree=function(e){var i=[];return p(e.rev_tree,function(e,t,n,r,o){"available"!==o.status||e||(i.push(t+"-"+n),o.status="missing")}),i},n.isDeleted=function(e,t){for(var n,r=(t=t||a(e)).substring(t.indexOf("-")+1),o=e.rev_tree.map(i);n=o.pop();){if(n[0]===r)return!!n[1].deleted;o=o.concat(n[2])}},n.isLocalId=function(e){return/^_local/.test(e)},n.merge=function(e,t,n){return t=y(e,t),{tree:(n=function(e,t){for(var n,r=h(e),o=0,i=r.length;o<i;o++){var s=r[o],a=s.ids;if(a.length>t)for(var u=u||{},c=a.length-t,f={pos:s.pos+c,ids:v(a,c)},l=0;l<c;l++){var d=s.pos+l+"-"+a[l].id;u[d]=!0}else f={pos:s.pos,ids:v(a,0)};n=n?y(n,f,!0).tree:[f]}return u&&p(n,function(e,t,n){delete u[t+"-"+n]}),{tree:n,revs:u?Object.keys(u):[]}}(t.tree,n)).tree,stemmedRevs:n.revs,conflicts:t.conflicts}},n.revExists=function(e,t){for(var n,r=e.slice(),t=t.split("-"),o=parseInt(t[0],10),i=t[1];n=r.pop();){if(n.pos===o&&n.ids[0]===i)return!0;for(var s=n.ids[2],a=0,u=s.length;a<u;a++)r.push({pos:n.pos+1,ids:s[a]})}return!1},n.rootToLeaf=h,n.traverseRevTree=p,n.winningRev=a,n.latest=function(e,t){for(var n,r=t.rev_tree.slice();n=r.pop();){var o=n.pos,i=n.ids,s=i[0],a=i[1],u=i[2],i=0===u.length,c=n.history?n.history.slice():[];if(c.push({id:s,pos:o,opts:a}),i)for(var f=0,l=c.length;f<l;f++){var d=c[f];if(d.pos+"-"+d.id===e)return o+"-"+s}for(var p=0,h=u.length;p<h;p++)r.push({pos:o+1,ids:u[p],history:c})}throw new Error("Unable to resolve latest revision for id "+t.id+", rev "+e)}},{}],20:[function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(n,"__esModule",{value:!0});var o=r(e(11)),i=e(16),a=r(e(13)),s=e(12),u=r(e(21)),c=e(22),f=r(e(23)),l=e(17),d=e(20);function p(e){if(e instanceof ArrayBuffer)return function(e){if("function"==typeof e.slice)return e.slice(0);var t=new ArrayBuffer(e.byteLength),n=new Uint8Array(t),e=new Uint8Array(e);return n.set(e),t}(e);var t=e.size,n=e.type;return"function"==typeof e.slice?e.slice(0,t,n):e.webkitSlice(0,t,n)}var h=Function.prototype.toString,v=h.call(Object);function y(e){var t,n,r,o,i;if(!e||"object"!=typeof e)return e;if(Array.isArray(e)){for(t=[],n=0,r=e.length;n<r;n++)t[n]=y(e[n]);return t}if(e instanceof Date)return e.toISOString();if(o=e,"undefined"!=typeof ArrayBuffer&&o instanceof ArrayBuffer||"undefined"!=typeof Blob&&o instanceof Blob)return p(e);if(o=e,!(null===(o=Object.getPrototypeOf(o))||"function"==typeof(o=o.constructor)&&o instanceof o&&h.call(o)==v))return e;for(n in t={},e)!Object.prototype.hasOwnProperty.call(e,n)||void 0!==(i=y(e[n]))&&(t[n]=i);return t}function m(t){var n=!1;return o(function(e){if(n)throw new Error("once called more than once");n=!0,t.apply(this,e)})}function g(s){return o(function(o){o=y(o);var i=this,t="function"==typeof o[o.length-1]&&o.pop(),e=new Promise(function(n,r){var e;try{var t=m(function(e,t){e?r(e):n(t)});o.push(t),(e=s.apply(i,o))&&"function"==typeof e.then&&n(e)}catch(e){r(e)}});return t&&e.then(function(e){t(null,e)},t),e})}function _(e,t){for(var n={},r=0,o=t.length;r<o;r++){var i=t[r];i in e&&(n[i]=e[i])}return n}var b;function w(e){return e}function A(e){return[{ok:e}]}try{localStorage.setItem("_pouch_check_localstorage",1),b=!!localStorage.getItem("_pouch_check_localstorage")}catch(e){b=!1}function E(){return b}function O(){var t;s.EventEmitter.call(this),this._listeners={},t=this,b&&addEventListener("storage",function(e){t.emit(e.key)})}function k(e){var t;"undefined"!=typeof console&&"function"==typeof console[e]&&(t=Array.prototype.slice.call(arguments,1),console[e].apply(console,t))}u(O,s.EventEmitter),O.prototype.addListener=function(e,t,n,r){var o,i;function s(){var e;o._listeners[t]&&(i?i="waiting":(i=!0,e=_(r,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary","return_docs"]),n.changes(e).on("change",function(e){e.seq>r.since&&!r.cancelled&&(r.since=e.seq,r.onChange(e))}).on("complete",function(){"waiting"===i&&a(s),i=!1}).on("error",function(){i=!1})))}this._listeners[t]||(i=!1,(o=this)._listeners[t]=s,this.on(e,s))},O.prototype.removeListener=function(e,t){t in this._listeners&&(s.EventEmitter.prototype.removeListener.call(this,e,this._listeners[t]),delete this._listeners[t])},O.prototype.notifyLocalWindows=function(e){b&&(localStorage[e]="a"===localStorage[e]?"b":"a")},O.prototype.notify=function(e){this.emit(e),this.notifyLocalWindows(e)};var I="function"==typeof Object.assign?Object.assign:function(e){for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t};e=function(){}.name?function(e){return e.name}:function(e){e=e.toString().match(/^\s*function\s*(?:(\S+)\s*)?\(/);return e&&e[1]?e[1]:""},u=e;function S(e){if(!e)return null;var t=e.split("/");return 2===t.length?t:1===t.length?[e,e]:null}var D=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],B="queryKey",R=/(?:^|&)([^&=]*)=?([^&]*)/g,x=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;function C(a,u,c){return new Promise(function(i,s){a.get(u,function(e,t){if(e){if(404!==e.status)return s(e);t={}}var n,r,o,e=t._rev,t=c(t);if(!t)return i({updated:!1,rev:e});t._id=u,t._rev=e,i((r=t,o=c,(n=a).put(r).then(function(e){return{updated:!0,rev:e.rev}},function(e){if(409!==e.status)throw e;return C(n,r._id,o)})))})})}e=f.v4;n.adapterFun=function(i,e){return g(o(function(r){if(this._closed)return Promise.reject(new Error("database is closed"));if(this._destroyed)return Promise.reject(new Error("database is destroyed"));var o=this;return function(r,o,e){if(r.constructor.listeners("debug").length){for(var t=["api",r.name,o],n=0;n<e.length-1;n++)t.push(e[n]);r.constructor.emit("debug",t);var i=e[e.length-1];e[e.length-1]=function(e,t){var n=(n=["api",r.name,o]).concat(e?["error",e]:["success",t]);r.constructor.emit("debug",n),i(e,t)}}}(o,i,r),this.taskqueue.isReady?e.apply(this,r):new Promise(function(t,n){o.taskqueue.addTask(function(e){e?n(e):t(o[i].apply(o,r))})})}))},n.assign=I,n.bulkGetShim=function(s,a,e){var t=a.docs,u=new i.Map;t.forEach(function(e){u.has(e.id)?u.get(e.id).push(e):u.set(e.id,[e])});var r=u.size,o=0,c=new Array(r);function f(){var n;++o===r&&(n=[],c.forEach(function(t){t.docs.forEach(function(e){n.push({id:t.id,docs:[e]})})}),e(null,{results:n}))}var n=[];u.forEach(function(e,t){n.push(t)});var l=0;function d(){var e,i;l>=n.length||(e=Math.min(l+6,n.length),e=n.slice(l,e),i=l,e.forEach(function(n,e){var r=i+e,e=u.get(n),t=_(e[0],["atts_since","attachments"]);t.open_revs=e.map(function(e){return e.rev}),t.open_revs=t.open_revs.filter(w);var o=w;0===t.open_revs.length&&(delete t.open_revs,o=A),["revs","attachments","binary","ajax","latest"].forEach(function(e){e in a&&(t[e]=a[e])}),s.get(n,t,function(e,t){var t=e?[{error:e}]:o(t);t=t,c[r]={id:n,docs:t},f(),d()})}),l+=e.length)}d()},n.changesHandler=O,n.clone=y,n.defaultBackOff=function(e){var t;return e=(t=e)?0:2e3,t=parseInt(t,10)||0,(e=parseInt(e,10))!=e||e<=t?e=(t||1)<<1:e+=1,6e5<e&&(t=3e5,e=6e5),~~((e-t)*Math.random()+t)},n.explainError=function(e,t){k("info","The above "+e+" is totally normal. "+t)},n.filterChange=function(r){var o={},i=r.filter&&"function"==typeof r.filter;return o.query=r.query_params,function(e){e.doc||(e.doc={});var t=i&&function(e,t,n){try{return!e(t,n)}catch(e){n="Filter function threw: "+e.toString();return c.createError(c.BAD_REQUEST,n)}}(r.filter,e.doc,o);if("object"==typeof t)return t;if(t)return!1;if(r.include_docs){if(!r.attachments)for(var n in e.doc._attachments)e.doc._attachments.hasOwnProperty(n)&&(e.doc._attachments[n].stub=!0)}else delete e.doc;return!0}},n.flatten=function(e){for(var t=[],n=0,r=e.length;n<r;n++)t=t.concat(e[n]);return t},n.functionName=u,n.guardedConsole=k,n.hasLocalStorage=E,n.invalidIdError=function(e){var t;if(e?"string"!=typeof e?t=c.createError(c.INVALID_ID):/^_/.test(e)&&!/^_(design|local)/.test(e)&&(t=c.createError(c.RESERVED_ID)):t=c.createError(c.MISSING_ID),t)throw t},n.isRemote=function(e){return"boolean"==typeof e._remote?e._remote:"function"==typeof e.type&&(k("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===e.type())},n.listenerCount=function(e,t){return"listenerCount"in e?e.listenerCount(t):s.EventEmitter.listenerCount(e,t)},n.nextTick=a,n.normalizeDdocFunctionName=function(e){return(e=S(e))?e.join("/"):null},n.once=m,n.parseDdocFunctionName=S,n.parseUri=function(e){for(var t=x.exec(e),r={},n=14;n--;){var o=D[n],i=t[n]||"",s=-1!==["user","password"].indexOf(o);r[o]=s?decodeURIComponent(i):i}return r[B]={},r[D[12]].replace(R,function(e,t,n){t&&(r[B][t]=n)}),r},n.pick=_,n.rev=function(e,t){return e=d.clone(e),t?(delete e._rev_tree,l.stringMd5(JSON.stringify(e))):f.v4().replace(/-/g,"").toLowerCase()},n.scopeEval=function(e,t){var n,r=[],o=[];for(n in t)t.hasOwnProperty(n)&&(r.push(n),o.push(t[n]));return r.push(e),Function.apply(null,r).apply(null,o)},n.toPromise=g,n.upsert=C,n.uuid=e},{11:11,12:12,13:13,16:16,17:17,20:20,21:21,22:22,23:23}],21:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;function n(){}n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],22:[function(e,t,n){"use strict";function r(e,t,n){Error.call(this,n),this.status=e,this.name=t,this.message=n,this.error=!0}Object.defineProperty(n,"__esModule",{value:!0}),((I=e(21))&&"object"==typeof I&&"default"in I?I.default:I)(r,Error),r.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};var o=new r(401,"unauthorized","Name or password is incorrect."),i=new r(400,"bad_request","Missing JSON list of 'docs'"),s=new r(404,"not_found","missing"),a=new r(409,"conflict","Document update conflict"),u=new r(400,"bad_request","_id field must contain a string"),c=new r(412,"missing_id","_id is required for puts"),f=new r(400,"bad_request","Only reserved document ids may start with underscore."),l=new r(412,"precondition_failed","Database not open"),d=new r(500,"unknown_error","Database encountered an unknown error"),p=new r(500,"badarg","Some query argument is invalid"),h=new r(400,"invalid_request","Request was invalid"),v=new r(400,"query_parse_error","Some query parameter is invalid"),y=new r(500,"doc_validation","Bad special document member"),m=new r(400,"bad_request","Something wrong with the request"),g=new r(400,"bad_request","Document must be a JSON object"),_=new r(404,"not_found","Database not found"),b=new r(500,"indexed_db_went_bad","unknown"),w=new r(500,"web_sql_went_bad","unknown"),A=new r(500,"levelDB_went_went_bad","unknown"),E=new r(403,"forbidden","Forbidden by design doc validate_doc_update function"),O=new r(400,"bad_request","Invalid rev format"),k=new r(412,"file_exists","The database could not be created, the file already exists."),e=new r(412,"missing_stub","A pre-existing attachment stub wasn't found"),I=new r(413,"invalid_url","Provided URL is invalid");n.UNAUTHORIZED=o,n.MISSING_BULK_DOCS=i,n.MISSING_DOC=s,n.REV_CONFLICT=a,n.INVALID_ID=u,n.MISSING_ID=c,n.RESERVED_ID=f,n.NOT_OPEN=l,n.UNKNOWN_ERROR=d,n.BAD_ARG=p,n.INVALID_REQUEST=h,n.QUERY_PARSE_ERROR=v,n.DOC_VALIDATION=y,n.BAD_REQUEST=m,n.NOT_AN_OBJECT=g,n.DB_MISSING=_,n.WSQ_ERROR=w,n.LDB_ERROR=A,n.FORBIDDEN=E,n.INVALID_REV=O,n.FILE_EXISTS=k,n.MISSING_STUB=e,n.IDB_ERROR=b,n.INVALID_URL=I,n.createError=function(n,e){function t(e){for(var t in n)"function"!=typeof n[t]&&(this[t]=n[t]);void 0!==e&&(this.reason=e)}return t.prototype=r.prototype,new t(e)},n.generateErrorFromResponse=function(e){var t;return"object"!=typeof e&&(t=e,(e=d).data=t),"error"in e&&"conflict"===e.error&&(e.name="conflict",e.status=409),"name"in e||(e.name=e.error||"unknown"),"status"in e||(e.status=500),"message"in e||(e.message=e.message||e.reason),e}},{21:21}],23:[function(e,t,n){var r=e(26),o=e(27),e=o;e.v1=r,e.v4=o,t.exports=e},{26:26,27:27}],24:[function(e,t,n){for(var r=[],o=0;o<256;++o)r[o]=(o+256).toString(16).substr(1);t.exports=function(e,t){return t=t||0,r[e[t++]]+r[e[t++]]+r[e[t++]]+r[e[t++]]+"-"+r[e[t++]]+r[e[t++]]+"-"+r[e[t++]]+r[e[t++]]+"-"+r[e[t++]]+r[e[t++]]+"-"+r[e[t++]]+r[e[t++]]+r[e[t++]]+r[e[t++]]+r[e[t++]]+r[e[+t]]}},{}],25:[function(e,t,n){var r,o,i="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);i?(r=new Uint8Array(16),t.exports=function(){return i(r),r}):(o=new Array(16),t.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o})},{}],26:[function(e,t,n){var f,l,d=e(25),p=e(24),h=0,v=0;t.exports=function(e,t,n){var r=t&&n||0,o=t||[],i=(e=e||{}).node||f,s=void 0!==e.clockseq?e.clockseq:l;null!=i&&null!=s||(u=d(),null==i&&(i=f=[1|u[0],u[1],u[2],u[3],u[4],u[5]]),null==s&&(s=l=16383&(u[6]<<8|u[7])));var a=void 0!==e.msecs?e.msecs:(new Date).getTime(),n=void 0!==e.nsecs?e.nsecs:v+1,u=a-h+(n-v)/1e4;if(u<0&&void 0===e.clockseq&&(s=s+1&16383),1e4<=(n=(u<0||h<a)&&void 0===e.nsecs?0:n))throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=a,l=s,n=(1e4*(268435455&(a+=122192928e5))+(v=n))%4294967296,o[r++]=n>>>24&255,o[r++]=n>>>16&255,o[r++]=n>>>8&255,o[r++]=255&n,a=a/4294967296*1e4&268435455,o[r++]=a>>>8&255,o[r++]=255&a,o[r++]=a>>>24&15|16,o[r++]=a>>>16&255,o[r++]=s>>>8|128,o[r++]=255&s;for(var c=0;c<6;++c)o[r+c]=i[c];return t||p(o)}},{24:24,25:25}],27:[function(e,t,n){var s=e(25),a=e(24);t.exports=function(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||s)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var i=0;i<16;++i)t[r+i]=o[i];return t||a(o)}},{24:24,25:25}],28:[function(e,t,n){var r,o,t=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(e){o=s}}();var u,c=[],f=!1,l=-1;function d(){f&&u&&(f=!1,u.length?c=u.concat(c):l=-1,c.length&&p())}function p(){if(!f){var e=a(d);f=!0;for(var t=c.length;t;){for(u=c,c=[];++l<t;)u&&u[l].run();l=-1,t=c.length}u=null,f=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function v(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||f||a(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=v,t.addListener=v,t.once=v,t.off=v,t.removeListener=v,t.removeAllListeners=v,t.emit=v,t.prependListener=v,t.prependOnceListener=v,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],29:[function(e,n,r){!function(e){if("object"==typeof r)n.exports=e();else{var t;try{t=window}catch(e){t=self}t.SparkMD5=e()}}(function(o){"use strict";var r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function u(e,t){var n=e[0],r=e[1],o=e[2],i=e[3],r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+t[0]-680876936|0)<<7|n>>>25)+r|0)&r|~n&o)+t[1]-389564586|0)<<12|i>>>20)+n|0)&n|~i&r)+t[2]+606105819|0)<<17|o>>>15)+i|0)&i|~o&n)+t[3]-1044525330|0)<<22|r>>>10)+o|0;r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+t[4]-176418897|0)<<7|n>>>25)+r|0)&r|~n&o)+t[5]+1200080426|0)<<12|i>>>20)+n|0)&n|~i&r)+t[6]-1473231341|0)<<17|o>>>15)+i|0)&i|~o&n)+t[7]-45705983|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+t[8]+1770035416|0)<<7|n>>>25)+r|0)&r|~n&o)+t[9]-1958414417|0)<<12|i>>>20)+n|0)&n|~i&r)+t[10]-42063|0)<<17|o>>>15)+i|0)&i|~o&n)+t[11]-1990404162|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+t[12]+1804603682|0)<<7|n>>>25)+r|0)&r|~n&o)+t[13]-40341101|0)<<12|i>>>20)+n|0)&n|~i&r)+t[14]-1502002290|0)<<17|o>>>15)+i|0)&i|~o&n)+t[15]+1236535329|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+t[1]-165796510|0)<<5|n>>>27)+r|0)&o|r&~o)+t[6]-1069501632|0)<<9|i>>>23)+n|0)&r|n&~r)+t[11]+643717713|0)<<14|o>>>18)+i|0)&n|i&~n)+t[0]-373897302|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+t[5]-701558691|0)<<5|n>>>27)+r|0)&o|r&~o)+t[10]+38016083|0)<<9|i>>>23)+n|0)&r|n&~r)+t[15]-660478335|0)<<14|o>>>18)+i|0)&n|i&~n)+t[4]-405537848|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+t[9]+568446438|0)<<5|n>>>27)+r|0)&o|r&~o)+t[14]-1019803690|0)<<9|i>>>23)+n|0)&r|n&~r)+t[3]-187363961|0)<<14|o>>>18)+i|0)&n|i&~n)+t[8]+1163531501|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+t[13]-1444681467|0)<<5|n>>>27)+r|0)&o|r&~o)+t[2]-51403784|0)<<9|i>>>23)+n|0)&r|n&~r)+t[7]+1735328473|0)<<14|o>>>18)+i|0)&n|i&~n)+t[12]-1926607734|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+t[5]-378558|0)<<4|n>>>28)+r|0)^r^o)+t[8]-2022574463|0)<<11|i>>>21)+n|0)^n^r)+t[11]+1839030562|0)<<16|o>>>16)+i|0)^i^n)+t[14]-35309556|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+t[1]-1530992060|0)<<4|n>>>28)+r|0)^r^o)+t[4]+1272893353|0)<<11|i>>>21)+n|0)^n^r)+t[7]-155497632|0)<<16|o>>>16)+i|0)^i^n)+t[10]-1094730640|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+t[13]+681279174|0)<<4|n>>>28)+r|0)^r^o)+t[0]-358537222|0)<<11|i>>>21)+n|0)^n^r)+t[3]-722521979|0)<<16|o>>>16)+i|0)^i^n)+t[6]+76029189|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+t[9]-640364487|0)<<4|n>>>28)+r|0)^r^o)+t[12]-421815835|0)<<11|i>>>21)+n|0)^n^r)+t[15]+530742520|0)<<16|o>>>16)+i|0)^i^n)+t[2]-995338651|0)<<23|r>>>9)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+t[0]-198630844|0)<<6|n>>>26)+r|0)|~o))+t[7]+1126891415|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+t[14]-1416354905|0)<<15|o>>>17)+i|0)|~n))+t[5]-57434055|0)<<21|r>>>11)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+t[12]+1700485571|0)<<6|n>>>26)+r|0)|~o))+t[3]-1894986606|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+t[10]-1051523|0)<<15|o>>>17)+i|0)|~n))+t[1]-2054922799|0)<<21|r>>>11)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+t[8]+1873313359|0)<<6|n>>>26)+r|0)|~o))+t[15]-30611744|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+t[6]-1560198380|0)<<15|o>>>17)+i|0)|~n))+t[13]+1309151649|0)<<21|r>>>11)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+t[4]-145523070|0)<<6|n>>>26)+r|0)|~o))+t[11]-1120210379|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+t[2]+718787259|0)<<15|o>>>17)+i|0)|~n))+t[9]-343485551|0)<<21|r>>>11)+o|0,e[0]=n+e[0]|0,e[1]=r+e[1]|0,e[2]=o+e[2]|0,e[3]=i+e[3]|0}function c(e){for(var t=[],n=0;n<64;n+=4)t[n>>2]=e.charCodeAt(n)+(e.charCodeAt(n+1)<<8)+(e.charCodeAt(n+2)<<16)+(e.charCodeAt(n+3)<<24);return t}function f(e){for(var t=[],n=0;n<64;n+=4)t[n>>2]=e[n]+(e[n+1]<<8)+(e[n+2]<<16)+(e[n+3]<<24);return t}function n(e){for(var t,n,r,o,i=e.length,s=[1732584193,-271733879,-1732584194,271733878],a=64;a<=i;a+=64)u(s,c(e.substring(a-64,a)));for(t=(e=e.substring(a-64)).length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],a=0;a<t;a+=1)n[a>>2]|=e.charCodeAt(a)<<(a%4<<3);if(n[a>>2]|=128<<(a%4<<3),55<a)for(u(s,n),a=0;a<16;a+=1)n[a]=0;return o=(o=8*i).toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(o[2],16),o=parseInt(o[1],16)||0,n[14]=r,n[15]=o,u(s,n),s}function s(e){for(var t=0;t<e.length;t+=1)e[t]=function(e){for(var t="",n=0;n<4;n+=1)t+=r[e>>8*n+4&15]+r[e>>8*n&15];return t}(e[t]);return e.join("")}function i(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}function a(e){return e=/[\u0080-\uFFFF]/.test(e)?unescape(encodeURIComponent(e)):e}function l(e){for(var t=[],n=e.length,r=0;r<n-1;r+=2)t.push(parseInt(e.substr(r,2),16));return String.fromCharCode.apply(String,t)}function d(){this.reset()}return"5d41402abc4b2a76b9719d911017c592"!==s(n("hello"))&&0,"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(e,t){var n=this.byteLength,r=i(e,n),e=n;return(e=t!==o?i(t,n):e)<r?new ArrayBuffer(0):(t=e-r,n=new ArrayBuffer(t),e=new Uint8Array(n),t=new Uint8Array(this,r,t),e.set(t),n)}),d.prototype.append=function(e){return this.appendBinary(a(e)),this},d.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;for(var t=this._buff.length,n=64;n<=t;n+=64)u(this._hash,c(this._buff.substring(n-64,n)));return this._buff=this._buff.substring(n-64),this},d.prototype.end=function(e){for(var t,n=this._buff,r=n.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=0;i<r;i+=1)o[i>>2]|=n.charCodeAt(i)<<(i%4<<3);return this._finish(o,r),t=s(this._hash),e&&(t=l(t)),this.reset(),t},d.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},d.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},d.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},d.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},d.prototype._finish=function(e,t){var n,r=t;if(e[r>>2]|=128<<(r%4<<3),55<r)for(u(this._hash,e),r=0;r<16;r+=1)e[r]=0;n=(n=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),t=parseInt(n[2],16),n=parseInt(n[1],16)||0,e[14]=t,e[15]=n,u(this._hash,e)},d.hash=function(e,t){return d.hashBinary(a(e),t)},d.hashBinary=function(e,t){e=s(n(e));return t?l(e):e},(d.ArrayBuffer=function(){this.reset()}).prototype.append=function(e){var t,n,r,o,i,s=(n=this._buff.buffer,r=e,o=!0,(i=new Uint8Array(n.byteLength+r.byteLength)).set(new Uint8Array(n)),i.set(new Uint8Array(r),n.byteLength),o?i:i.buffer),a=s.length;for(this._length+=e.byteLength,t=64;t<=a;t+=64)u(this._hash,f(s.subarray(t-64,t)));return this._buff=t-64<a?new Uint8Array(s.buffer.slice(t-64)):new Uint8Array(0),this},d.ArrayBuffer.prototype.end=function(e){for(var t,n=this._buff,r=n.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=0;i<r;i+=1)o[i>>2]|=n[i]<<(i%4<<3);return this._finish(o,r),t=s(this._hash),e&&(t=l(t)),this.reset(),t},d.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},d.ArrayBuffer.prototype.getState=function(){var e,t=d.prototype.getState.call(this);return t.buff=(e=t.buff,String.fromCharCode.apply(null,new Uint8Array(e))),t},d.ArrayBuffer.prototype.setState=function(e){return e.buff=function(e,t){for(var n=e.length,r=new ArrayBuffer(n),o=new Uint8Array(r),i=0;i<n;i+=1)o[i]=e.charCodeAt(i);return t?o:r}(e.buff,!0),d.prototype.setState.call(this,e)},d.ArrayBuffer.prototype.destroy=d.prototype.destroy,d.ArrayBuffer.prototype._finish=d.prototype._finish,d.ArrayBuffer.hash=function(e,t){e=s(function(e){for(var t,n,r,o,i=e.length,s=[1732584193,-271733879,-1732584194,271733878],a=64;a<=i;a+=64)u(s,f(e.subarray(a-64,a)));for(t=(e=a-64<i?e.subarray(a-64):new Uint8Array(0)).length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],a=0;a<t;a+=1)n[a>>2]|=e[a]<<(a%4<<3);if(n[a>>2]|=128<<(a%4<<3),55<a)for(u(s,n),a=0;a<16;a+=1)n[a]=0;return o=(o=8*i).toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(o[2],16),o=parseInt(o[1],16)||0,n[14]=r,n[15]=o,u(s,n),s}(new Uint8Array(e)));return t?l(e):e},d})},{}]},{},[3])(3)});
